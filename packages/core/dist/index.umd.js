(function(y,M){typeof exports=="object"&&typeof module<"u"?M(exports):typeof define=="function"&&define.amd?define(["exports"],M):(y=typeof globalThis<"u"?globalThis:y||self,M(y.index={}))})(this,function(y){"use strict";var Js=Object.defineProperty;var Ws=(y,M,A)=>M in y?Js(y,M,{enumerable:!0,configurable:!0,writable:!0,value:A}):y[M]=A;var T=(y,M,A)=>(Ws(y,typeof M!="symbol"?M+"":M,A),A);function M(e,t){this.flags=e,this.cursor=t}M.prototype={skip:function(){this.flags.skip=!0},break:function(){this.flags.break=!0},remove:function(){this.flags.remove=!0},replace:function(t){this.flags.replace=t},get parent(){return this.cursor.parent},get depth(){return this.cursor.depth},get level(){return this.cursor.depth+1},get index(){return this.cursor.index}};function A(e,t){return new M(e,t)}function oe(e){this.xs=[e],this.top=0}oe.prototype={push:function(t){this.top++,this.top<this.xs.length?this.xs[this.top]=t:this.xs.push(t)},pushArrayReverse:function(t){for(var r=t.length-1;r>=0;r--)this.push(t[r])},pop:function(){var t=this.peek();return this.top--,t},peek:function(){return this.xs[this.top]},isEmpty:function(){return this.top===-1}};function B(e){return new oe(e)}function ue(){this.depth=0,this.stack=B({node:null,index:-1})}ue.prototype={moveDown:function(t){this.depth++,this.stack.push({node:t,index:0})},moveUp:function(){this.depth--,this.stack.pop()},moveNext:function(){this.stack.peek().index++},get parent(){return this.stack.peek().node},get index(){return this.stack.peek().index}};function ce(){return new ue}function fe(){this.break=!1,this.skip=!1,this.remove=!1,this.replace=null}fe.prototype={reset:function(){this.break=!1,this.skip=!1,this.remove=!1,this.replace=null}};function J(){return new fe}function W(e){return e&&e.length!==0}function Ge(e,t,r){for(var a=J(),s=ce(),u=A(a,s),f=B(e),h=Object.assign({},e);!f.isEmpty();){var g=f.pop();if(g===h){s.moveUp();continue}if(a.reset(),t(g,u),a.break)break;if(!a.remove&&(s.moveNext(),!a.skip)){a.replace&&(g=a.replace);var _=r(g);W(_)&&(f.push(h),f.pushArrayReverse(_),s.moveDown(g))}}}function Ue(e,t,r){for(var a=J(),s=ce(),u=A(a,s),f=B(e),h=B(null);!f.isEmpty();){var g=f.peek(),_=h.peek(),d=r(g);if(a.reset(),g===_||!W(d)){if(g===_&&(h.pop(),s.moveUp()),f.pop(),t(g,u),a.break)break;if(a.remove)continue;s.moveNext()}else h.push(g),s.moveDown(g),f.pushArrayReverse(d)}}var Re=32768;function le(e){this.xs=[e],this.top=0,this.maxLength=0}le.prototype={enqueue:function(t){this.xs.push(t)},enqueueMultiple:function(t){for(var r=0,a=t.length;r<a;r++)this.enqueue(t[r])},dequeue:function(){var t=this.peek();return this.top++,this.top===Re&&(this.xs=this.xs.slice(this.top),this.top=0),t},peek:function(){return this.xs[this.top]},isEmpty:function(){return this.top===this.xs.length}};function he(e){return new le(e)}function de(){this.depth=0,this.index=-1,this.queue=he({node:null,arity:1}),this.levelNodes=1,this.nextLevelNodes=0}de.prototype={store:function(t,r){this.queue.enqueue({node:t,arity:r}),this.nextLevelNodes+=r},moveNext:function(){this.index++},moveForward:function(){this.queue.peek().arity--,this.levelNodes--,this.queue.peek().arity===0&&(this.index=0,this.queue.dequeue()),this.levelNodes===0&&(this.depth++,this.levelNodes=this.nextLevelNodes,this.nextLevelNodes=0)},get parent(){return this.queue.peek().node}};function ze(){return new de}function qe(e,t,r){for(var a=J(),s=ze(),u=A(a,s),f=he(e);!f.isEmpty();){var h=f.dequeue();if(a.reset(),t(h,u),a.break)break;if(!a.remove&&(s.moveNext(),a.replace&&(h=a.replace),!a.skip)){var g=r(h);W(g)&&(f.enqueueMultiple(g),s.store(h,g.length))}s.moveForward()}}var Ke=function(t){return t.children};function Ze(e,t,r){if(e!=null){r=r||{};var a=r.order||"pre",s=r.getChildren||Ke;a==="pre"?Ge(e,t,s):a==="post"?Ue(e,t,s):a==="bfs"&&qe(e,t,s)}}var j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Je(e){for(var t=-1,r=e==null?0:e.length,a=0,s=[];++t<r;){var u=e[t];u&&(s[a++]=u)}return s}var We=Je,Xe=Array.isArray,X=Xe,Ve=typeof j=="object"&&j&&j.Object===Object&&j,Qe=Ve,et=Qe,tt=typeof self=="object"&&self&&self.Object===Object&&self,rt=et||tt||Function("return this")(),V=rt,nt=V,at=nt.Symbol,Q=at,pe=Q,me=Object.prototype,st=me.hasOwnProperty,it=me.toString,H=pe?pe.toStringTag:void 0;function ot(e){var t=st.call(e,H),r=e[H];try{e[H]=void 0;var a=!0}catch{}var s=it.call(e);return a&&(t?e[H]=r:delete e[H]),s}var ut=ot,ct=Object.prototype,ft=ct.toString;function lt(e){return ft.call(e)}var ht=lt,ye=Q,dt=ut,pt=ht,mt="[object Null]",yt="[object Undefined]",ge=ye?ye.toStringTag:void 0;function gt(e){return e==null?e===void 0?yt:mt:ge&&ge in Object(e)?dt(e):pt(e)}var ve=gt;function vt(e){return e!=null&&typeof e=="object"}var _t=vt,Dt=ve,Mt=_t,bt="[object Symbol]";function Nt(e){return typeof e=="symbol"||Mt(e)&&Dt(e)==bt}var G=Nt,wt=X,Tt=G,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/;function St(e,t){if(wt(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Tt(e)?!0:$t.test(e)||!At.test(e)||t!=null&&e in Object(t)}var Et=St;function Ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var U=Ct,Ft=ve,It=U,Ot="[object AsyncFunction]",kt="[object Function]",Pt="[object GeneratorFunction]",xt="[object Proxy]";function Ht(e){if(!It(e))return!1;var t=Ft(e);return t==kt||t==Pt||t==Ot||t==xt}var _e=Ht,Yt=V,Lt=Yt["__core-js_shared__"],Bt=Lt,ee=Bt,De=function(){var e=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function jt(e){return!!De&&De in e}var Gt=jt,Ut=Function.prototype,Rt=Ut.toString;function zt(e){if(e!=null){try{return Rt.call(e)}catch{}try{return e+""}catch{}}return""}var qt=zt,Kt=_e,Zt=Gt,Jt=U,Wt=qt,Xt=/[\\^$.*+?()[\]{}|]/g,Vt=/^\[object .+?Constructor\]$/,Qt=Function.prototype,er=Object.prototype,tr=Qt.toString,rr=er.hasOwnProperty,nr=RegExp("^"+tr.call(rr).replace(Xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ar(e){if(!Jt(e)||Zt(e))return!1;var t=Kt(e)?nr:Vt;return t.test(Wt(e))}var sr=ar;function ir(e,t){return e==null?void 0:e[t]}var or=ir,ur=sr,cr=or;function fr(e,t){var r=cr(e,t);return ur(r)?r:void 0}var Me=fr,lr=Me,hr=lr(Object,"create"),R=hr,be=R;function dr(){this.__data__=be?be(null):{},this.size=0}var pr=dr;function mr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var yr=mr,gr=R,vr="__lodash_hash_undefined__",_r=Object.prototype,Dr=_r.hasOwnProperty;function Mr(e){var t=this.__data__;if(gr){var r=t[e];return r===vr?void 0:r}return Dr.call(t,e)?t[e]:void 0}var br=Mr,Nr=R,wr=Object.prototype,Tr=wr.hasOwnProperty;function Ar(e){var t=this.__data__;return Nr?t[e]!==void 0:Tr.call(t,e)}var $r=Ar,Sr=R,Er="__lodash_hash_undefined__";function Cr(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Sr&&t===void 0?Er:t,this}var Fr=Cr,Ir=pr,Or=yr,kr=br,Pr=$r,xr=Fr;function F(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}F.prototype.clear=Ir,F.prototype.delete=Or,F.prototype.get=kr,F.prototype.has=Pr,F.prototype.set=xr;var Hr=F;function Yr(){this.__data__=[],this.size=0}var Lr=Yr;function Br(e,t){return e===t||e!==e&&t!==t}var Ne=Br,jr=Ne;function Gr(e,t){for(var r=e.length;r--;)if(jr(e[r][0],t))return r;return-1}var z=Gr,Ur=z,Rr=Array.prototype,zr=Rr.splice;function qr(e){var t=this.__data__,r=Ur(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():zr.call(t,r,1),--this.size,!0}var Kr=qr,Zr=z;function Jr(e){var t=this.__data__,r=Zr(t,e);return r<0?void 0:t[r][1]}var Wr=Jr,Xr=z;function Vr(e){return Xr(this.__data__,e)>-1}var Qr=Vr,en=z;function tn(e,t){var r=this.__data__,a=en(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var rn=tn,nn=Lr,an=Kr,sn=Wr,on=Qr,un=rn;function I(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}I.prototype.clear=nn,I.prototype.delete=an,I.prototype.get=sn,I.prototype.has=on,I.prototype.set=un;var cn=I,fn=Me,ln=V,hn=fn(ln,"Map"),dn=hn,we=Hr,pn=cn,mn=dn;function yn(){this.size=0,this.__data__={hash:new we,map:new(mn||pn),string:new we}}var gn=yn;function vn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _n=vn,Dn=_n;function Mn(e,t){var r=e.__data__;return Dn(t)?r[typeof t=="string"?"string":"hash"]:r.map}var q=Mn,bn=q;function Nn(e){var t=bn(this,e).delete(e);return this.size-=t?1:0,t}var wn=Nn,Tn=q;function An(e){return Tn(this,e).get(e)}var $n=An,Sn=q;function En(e){return Sn(this,e).has(e)}var Cn=En,Fn=q;function In(e,t){var r=Fn(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var On=In,kn=gn,Pn=wn,xn=$n,Hn=Cn,Yn=On;function O(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}O.prototype.clear=kn,O.prototype.delete=Pn,O.prototype.get=xn,O.prototype.has=Hn,O.prototype.set=Yn;var Ln=O,Te=Ln,Bn="Expected a function";function te(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Bn);var r=function(){var a=arguments,s=t?t.apply(this,a):a[0],u=r.cache;if(u.has(s))return u.get(s);var f=e.apply(this,a);return r.cache=u.set(s,f)||u,f};return r.cache=new(te.Cache||Te),r}te.Cache=Te;var jn=te,Gn=jn,Un=500;function Rn(e){var t=Gn(e,function(a){return r.size===Un&&r.clear(),a}),r=t.cache;return t}var zn=Rn,qn=zn,Kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/\\(\\)?/g,Jn=qn(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Kn,function(r,a,s,u){t.push(s?u.replace(Zn,"$1"):a||r)}),t}),Wn=Jn;function Xn(e,t){for(var r=-1,a=e==null?0:e.length,s=Array(a);++r<a;)s[r]=t(e[r],r,e);return s}var Vn=Xn,Ae=Q,Qn=Vn,ea=X,ta=G,ra=1/0,$e=Ae?Ae.prototype:void 0,Se=$e?$e.toString:void 0;function Ee(e){if(typeof e=="string")return e;if(ea(e))return Qn(e,Ee)+"";if(ta(e))return Se?Se.call(e):"";var t=e+"";return t=="0"&&1/e==-ra?"-0":t}var na=Ee,aa=na;function sa(e){return e==null?"":aa(e)}var ia=sa,oa=X,ua=Et,ca=Wn,fa=ia;function la(e,t){return oa(e)?e:ua(e,t)?[e]:ca(fa(e))}var ha=la,da=G,pa=1/0;function ma(e){if(typeof e=="string"||da(e))return e;var t=e+"";return t=="0"&&1/e==-pa?"-0":t}var ya=ma,ga=ha,va=ya;function _a(e,t){t=ga(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[va(t[r++])];return r&&r==a?e:void 0}var Da=_a,Ma=Da;function ba(e,t,r){var a=e==null?void 0:Ma(e,t);return a===void 0?r:a}var Na=ba;function wa(e){return e==null}var Ta=wa;const Aa=function(e,t={}){let r={},a=[],s=[],u={};const f=function(){r={},a=[],s=[],u={}};f();let{childrenKey:h="children",checkedKey:g="checked",idKey:_="id"}=t,d=0,D=0;const n=function(l={}){h=l.childrenKey||h,g=l.checkedKey||g,_=l.idKey||_},i=function(l,p){l.forEach(function(m){const w=m[_];r[w]=m,m={...m},s.push(m),m.parent=p,m.index=d++;const x=p?p.deepth+1:0;m.deepth=x,D=Math.max(D,x),m.path=p?p.path+"."+m[_]:"0",m.parentIdList=p?[...p.parentIdList,p[_]]:[],u[w]=m,m[h]&&m[h].length>0&&i(m[h],m)})},o=function(l){return l[h]&&l[h].length>0?!l[h].map(m=>b(m[_])).find(m=>!m[g]):!1},c=function(l){f(),Array.isArray(l)&&i(l)};c(e);const v=function(l){var p;return(p=b(l))==null?void 0:p.parentIdList.map(m=>b(m))},N=function(l){const p=b(l);return s.filter(function(m){return m.parent===(p==null?void 0:p.parent)})},$=function(l){let p;if(!l)return console.warn("id\u4E0D\u80FD\u4E3A\u7A7A"),null;if(l instanceof Object)p=l[_];else if(typeof l=="string"||typeof l=="number")p=l;else return console.warn("id\u7C7B\u578B\u975E\u6CD5:",l),null;return p},b=function(l){const p=$(l);return p?u[p]:null},S=function(l){const p=$(l);return p?r[p]:null},zs=function(l){const p=b(l);return p==null?void 0:p.deepth},qs=function(l,p){const m=b(l);m&&Object.assign(m,p)},Ks=function(l,p,m=!1){const w=b(l);w&&(w[g]=p,m&&(w.parentIdList.forEach(x=>{const je=u[x];je[g]=o(je)}),Z(w,function(x){x[g]=p})))},Zs=function(l){const p={};l&&l.forEach(m=>{p[m]=!0}),s.forEach(m=>{m[g]=p[m[_]]||!1})},Z=function(l,p){const m=b(l);if(m)p(m),m[h]&&m[h].length>0&&m[h].forEach(function(w){Z(w,p)});else throw new Error("\u8282\u70B9\u4E0D\u5B58\u5728:"+l)};return{travelNode:Z,getNodeList:(l=!0)=>l?[...s]:[...a],getNodeDescendantList:l=>{const p=[];return Z(l,function(m){p.push(m)}),p},getNodeListByFilter:l=>s.filter(l),getMinDeepth:function(){let l=D;for(const p in s){const m=s[p];if(m.checked&&(l=Math.min(l,m.deepth)),l===0)return 0}return l},getSublings:N,getParents:v,getDeepth:zs,getNode:b,updateIndexes:c,setChecked:Ks,setProps:qs,travelAllNode:function(l){for(const p in s){const m=s[p],w=S(m[_]);if(l(m,w)===!1)break}},setOptions:n,resetCheckStatus:Zs,getOriginNode:S}},re=function(e,t,r="children",a="id",s=[],u={flag:!1}){if(e instanceof Array){re({[r]:e},t,r,a,s);return}const f=(e==null?void 0:e[r])||[];for(let h=0;h<f.length;h++){const g=f[h];if(!t(g,s,r,a)){u.flag=!0;break}if(g[r]instanceof Array&&re(g[r],t,r,a,[g,...s],u),u.flag)break}},Y=function(e,t,r=null,a=!1){if(typeof t=="string"&&(t=t.split(",")),!!Array.isArray(t)){for(let s=0;s<t.length;s++){const u=t[s],f=Na(e,u);if(a?Ta(f):!!f)return f}return r}},ne=e=>Object.prototype.toString.call(e)=="[object Object]",Ce=function(e,t,r,a="_",s=0){e[t]?s<5&&Ce(e,a+t,r,a,s+1):e[t]=r},$a=function(e,t,r){let a=!1;return Array.isArray(e)&&(e={[t]:e},a=!0),Ze(e,r,{getChildren(s){return s[t]}}),a?e[t]:e},Sa=function(e,t="value",r="name",a=",",s=/\s+/,u=["0, \u8BF7\u63D0\u4F9Boptions"],f=null){let h,g;typeof e=="function"&&(g=e()),typeof e=="string"?h=e.split(s).map(d=>d.trim()):Array.isArray(e)?h=e:Array.isArray(u)?h=u:typeof u=="function"?g=u():h=[{name:"\u8BF7\u901A\u8FC7optionLs\u4F20\u5165\u6570\u7EC4\u6216\u8005\u5F02\u6B65\u51FD\u6570",value:-1}];const _=function(d){typeof f=="function"&&(d=d.map(n=>{let[i,o]=f(n,{valueField:t,nameField:r},Y);return{value:i,name:o}}));let D=We(d);return D.length!=d.length&&console.warn("options\u4E2D\u5B58\u5728\u7A7A\u9009\u9879",d),d=D,d=d.map(n=>{if((typeof n=="string"||typeof n=="number")&&(n=(n+"").split(a).map(i=>i.trim())),Array.isArray(n)){let[i,o]=n;return o===void 0&&(o=i),{value:i,name:o}}else return n?{name:Y(n,r),value:Y(n,t)}:{name:"\u65E0\u6548options",value:"-"}}),d.forEach(n=>{typeof n.value!="number"&&typeof n.value!="string"&&(n.value=n.value+"")}),d};return h?_(h):g.then(d=>_(d))},Ea=function(e,t=null){if(ne(e))return e;if(typeof e!="string")return console.warn("safeJsonParser error",e),t;try{return JSON.parse(e)}catch{return console.log("json\u89E3\u6790\u5931\u8D25:",e),t}},Ca=function(e,t,r=0,a=void 0){if(t.includes(e))return e;{let s=t[r];return s===void 0&&(s=a),s}};function Fa(e){return new Promise(function(t,r){var a=typeof e=="string"?e:URL.createObjectURL(e);if(!a)throw new Error("Must use a valid image");var s=document.createElement("img");s.onload=()=>{typeof e!="string"&&URL.revokeObjectURL(a),t({width:s.width,height:s.height})},s.onerror=u=>{typeof e!="string"&&URL.revokeObjectURL(a),r(u)},s.src=a})}function Ia(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){const s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}const a=e.indexOf("Edge/");return a>0?parseInt(e.substring(a+5,e.indexOf(".",a)),10):-1}Ia();function Fe(...e){let t;Array.isArray(arguments[0])?t=arguments[0]:t=Array.prototype.slice.call(arguments);let r=[];return t.reduce(function(a,s,u,f){return a.then(function(){if(typeof s=="function")try{s=s()}catch(h){return f.splice(1),Promise.reject(h)}else console.warn("map element:"+u+" not function");return s.then(h=>{r[u]=h})})},Promise.resolve(r)).then(function(){return r})}class Oa extends Promise{constructor(r=void 0){let a,s;super((u,f)=>{a=u,s=f,r&&r(u,f)});T(this,"__resolve");T(this,"__reject");this.__resolve=a,this.__reject=s}static map(r){return Fe(r)}static all(r){return Promise.all(r)}resolve(r){this.__resolve(r)}_resolve(r){this.__resolve(r)}reject(r){this.__reject(r)}_reject(r){this.__reject(r)}}const K=class{static get fastGbk(){if(!this._fastGbk)throw new Error("\u8BF7\u5148\u8C03\u7528setFaskGbk\u65B9\u6CD5\u8BBE\u7F6EfastGbk::$GBK.setFaskGbk(require('fast-gbk'))");return this._fastGbk}static setFaskGbk(t){this._fastGbk=t}static encode(t){return K.fastGbk.encode(t)}static decode(t){if(!t||!t.length)return"";typeof t=="string"&&(/^\%/.test(t)?t=t.split("%").splice(1):t=t.split(","));let r="";if(Array.isArray(t))if(typeof t[0]=="number")r=this.fastGbk.decode(t);else{const a=t.map(s=>{typeof s=="number"&&(console.warn("decodeGBK\u4F20\u5165\u7684\u6570\u7EC4\u4E2D\u6709number\u7C7B\u578B\u7684\u6570\u636E\uFF0C\u8FD9\u662F\u4E0D\u5141\u8BB8\u7684\uFF0C\u4F1A\u5BFC\u81F4\u89E3\u7801\u9519\u8BEF"),s=s+"");let u=parseInt(s,16);return isNaN(u)?0:u});r=K.decode(a)}return r}};let E=K;T(E,"_fastGbk");const Ie=new Map;function ka(e){if(e===0)return"0";if(e===!1)return"False";if(!e)return"";if(typeof e!="string")throw new Error("\u65E0\u6548\u8F93\u5165");let[t,...r]=e;return t.toUpperCase()+r.join("")}function Pa(e,t){if(!e||!t)return"";var r=0,a=0,s="";for(a=0;a<e.length;a++){if(e.charCodeAt(a)>255?r+=2:r++,r>t)return s;s+=e.charAt(a)}return e}const Oe=()=>{let e=Math.random().toString(32).substr(2);return Ie.get(e)?Oe():(Ie.set(e,!0),e)};function xa(e){return E.decode(e)}function Ha(e){return E.decode(e)}function Ya(e,t="utf-8",r=16){return t.toLowerCase()=="gbk"&&r==16?xa(e):new TextDecoder(t).decode(new Uint8Array(e.map(a=>Number.isFinite(a)?a:parseInt(a,r))))}function La(e,t="string"){return t=="string"?E.encode(e):E.encode(e).split("%").splice(1)}function Ba(e){for(var t=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a>=1&&a<=126||65376<=a&&a<=65439?t++:t+=2}return t}const ja=(e,t="")=>ne(e)?JSON.stringify(e):typeof e=="string"?e:(console.warn("safeStringify error(\u6682\u4E0D\u652F\u6301\u7684\u6570\u636E\u7C7B\u578B)",e),t),Ga=/\:\:([-\d\.]+)$/,C=class{constructor(t,r,a=!1,s=null){T(this,"_name");T(this,"_code");T(this,"_silent");const u=this;u._name=t,u._code=r,u._silent=a}static addNameFieldList(t){this.nameFieldList.push(t)}get name(){return this._name}get message(){return this._name}get msg(){return this._name}get code(){return this._code}get cod(){return this._code}get errorCode(){return this._code}get silent(){return this._silent}get silence(){return this._silent}toString2(){const t=this;return`AError:${t.code}-${t.name}`}static fromErrorText(t,r=!1){const a=`${t}-${r?"0":"1"}`;let s=ke[a];if(!s){let u,f;Ga.test(t)?(u=RegExp.$1,f=t.replace(`::${u}`,"")):(u=0,f=t),s=new C(f,u,r),ke[a]=s}return s}static create(t,r=!1){return this.fromObject(t,r)}static getErrorCode(t){return t?t.constructor==C?t._code:this.fromObject(t)._code:0}};let L=C;T(L,"nameFieldList",["error","message","msg","errMsg","reason","errorText"]),T(L,"fromObject",(t,r=!1)=>{const a=C;if(!t)return new C("\u672A\u77E5\u9519\u8BEF",-9999);let s;if(t instanceof Error)return a.fromErrorText(t.message,r);if(typeof t=="string")if(/^(\[|\{)/.test(t))try{t=JSON.parse(t)}catch{s=t}else s=t;else s=Y(t,C.nameFieldList),r||(r=t.silence||t.silent);return!s&&t.data?a.fromObject(t.data):a.fromErrorText(s,r)});const ke={};function Ua(e,t,r){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var u=Array(s);++a<s;)u[a]=e[a+t];return u}var Ra=Ua,za=9007199254740991;function qa(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=za}var Ka=qa,Za=_e,Ja=Ka;function Wa(e){return e!=null&&Ja(e.length)&&!Za(e)}var Xa=Wa,Va=9007199254740991,Qa=/^(?:0|[1-9]\d*)$/;function es(e,t){var r=typeof e;return t=t==null?Va:t,!!t&&(r=="number"||r!="symbol"&&Qa.test(e))&&e>-1&&e%1==0&&e<t}var ts=es,rs=Ne,ns=Xa,as=ts,ss=U;function is(e,t,r){if(!ss(r))return!1;var a=typeof t;return(a=="number"?ns(r)&&as(t,r.length):a=="string"&&t in r)?rs(r[t],e):!1}var os=is,us=/\s/;function cs(e){for(var t=e.length;t--&&us.test(e.charAt(t)););return t}var fs=cs,ls=fs,hs=/^\s+/;function ds(e){return e&&e.slice(0,ls(e)+1).replace(hs,"")}var ps=ds,ms=ps,Pe=U,ys=G,xe=0/0,gs=/^[-+]0x[0-9a-f]+$/i,vs=/^0b[01]+$/i,_s=/^0o[0-7]+$/i,Ds=parseInt;function Ms(e){if(typeof e=="number")return e;if(ys(e))return xe;if(Pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ms(e);var r=vs.test(e);return r||_s.test(e)?Ds(e.slice(2),r?2:8):gs.test(e)?xe:+e}var bs=Ms,Ns=bs,He=1/0,ws=17976931348623157e292;function Ts(e){if(!e)return e===0?e:0;if(e=Ns(e),e===He||e===-He){var t=e<0?-1:1;return t*ws}return e===e?e:0}var As=Ts,$s=As;function Ss(e){var t=$s(e),r=t%1;return t===t?r?t-r:t:0}var Es=Ss,Cs=Ra,Fs=os,Is=Es,Os=Math.ceil,ks=Math.max;function Ps(e,t,r){(r?Fs(e,t,r):t===void 0)?t=1:t=ks(Is(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var s=0,u=0,f=Array(Os(a/t));s<a;)f[u++]=Cs(e,s,s+=t);return f}var Ye=Ps;class ae{static strip(t,r=12){return+parseFloat(t.toPrecision(r))}static hexString2DecLs(t){return Ye(t,2).map(r=>parseInt(r.join(""),16))}static preppendZero(t,r=2){return se(r,t)}static getDec(t){return t-Math.trunc(t)}static toDEC(t,r=16){return Array.isArray(t)?t.map(a=>parseInt(a,r)):parseInt(t,r)}static toHEX(t,r=2,a=10){if(Array.isArray(t))return t.map(s=>Array.isArray(s)?s[0]:this.toHEX(s,length,a));if(/[a-zA-Z]/.test(t+""))throw new Error("\u65E0\u6CD5\u8F6C\u6362\u4E3AHEX:"+t);return t=parseInt(t+"",a),t>=Math.pow(2,8)&&(r=4),xs(t,r)[0]}}function xs(e,t=2){let r=parseInt(e+"").toString(16).toUpperCase(),a=Ye(r,t).map(u=>u.join(""));const s=se(t,a[0]);return a.splice(0,1,s),a}function se(e,t){let r=e-(t+"").length;return r<=0?t+"":Array(r).fill("0").join("")+(t+"")}function Le(e,t=12){return typeof e!="number"&&(e=0),+parseFloat(e.toPrecision(t))}function Hs(e,t=2){typeof e!="number"&&(e=0);const r=Le(e).toFixed(t);return parseFloat(r)}const Ys=function(e,t=Number.MAX_SAFE_INTEGER,r=0){const a=typeof e=="string";let s=a?ae.toDEC(e):e;return typeof r=="number"&&(s=Math.max(r,s)),typeof t=="number"&&(s=Math.min(t,s)),a?ae.toHEX(s):s},Ls=(e,t=0)=>{if(typeof e=="number")return e;const s=((e+"").includes(".")?parseFloat:parseInt)(e);return isNaN(s)?t:s};/**
 * JavaScript Date instance methods
 *
 * @copyright 2012 Ken Snyder (kendsnyder at gmail dot com)
 * @version 3.5.0, June 2012 (http://sandbox.kendsnyder.com/date)
 * @license MIT http://www.opensource.org/licenses/MIT
 */(function(){function e(n,i){switch(i-String(n).length){case 2:return"00"+n;case 1:return"0"+n}return n}function t(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}var r=[],a={millisecond:1,second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3,month:{add:function(n,i){var o=n.getDate();a.year.add(n,Math[i>0?"floor":"ceil"](i/12));var c=n.getMonth()+i%12;c==12?(c=0,n.setYear(n.getFullYear()+1)):c==-1&&(c=11,n.setYear(n.getFullYear()-1)),n.setMonth(c),n.getDate()!=o&&(n.add(-1,"month"),n.setDate(n.daysInMonth()))},diff:function(n,i){var o=n.getFullYear()-i.getFullYear(),c=n.getMonth()-i.getMonth()+o*12,v=n.getDate()-i.getDate();return c+v/30}},year:{add:function(n,i){n.setYear(n.getFullYear()+Math[i>0?"floor":"ceil"](i))},diff:function(n,i){return a.month.diff(n,i)/12}}},s=a;s.milliseconds=s.millisecond,s.seconds=s.second,s.minutes=s.minute,s.hours=s.hour,s.weeks=s.week,s.days=s.day,s.months=s.month,s.years=s.year;var u={succ:function(n){return this.clone().add(1,n||"day")},add:function(n,i){var o=a[i]||a.day;return typeof o=="number"?this.setTime(this.getTime()+o*n):o.add(this,n),this},diff:function(n,i,o){var c;if(n=Date.create(n),n===null)return NaN;var v=a[i]||a.day;return typeof v=="number"?c=(this.getTime()-n.getTime())/v:c=v.diff(this,n),o?c:Math[c>0?"floor":"ceil"](c)},_applyFormat:function(n,i){for(var o=n||i.defaultFormat,c="",v;o.length>0;)(v=o.match(i.matcher))?(c+=o.slice(0,v.index),c+=(v[1]||"")+this._applyFormatChar(v[2],i),o=o.slice(v.index+v[0].length)):(c+=o,o="");return c},_applyFormatChar:function(n,i){if(i.shortcuts&&i.shortcuts[n])return this._applyFormat(i.shortcuts[n],i);if(i.codes&&i.codes[n]){var o=i.codes[n].split("."),c=this["get"+o[0]]?this["get"+o[0]]():"";return o[1]&&(c=e(c,o[1])),c}return n},format:function(n){return n=n||Date.formatting.strftime.defaultFormat,n.indexOf("%")>-1?this.strftime(n):this.formatPhp(n)},getShortYear:function(){return this.getYear()%100},getMonthNumber:function(){return this.getMonth()+1},getMonthName:function(){return Date.MONTHNAMES[this.getMonth()]},getAbbrMonthName:function(){return Date.ABBR_MONTHNAMES[this.getMonth()]},getDayName:function(){return Date.DAYNAMES[this.getDay()]},getAbbrDayName:function(){return Date.ABBR_DAYNAMES[this.getDay()]},getDayOrdinal:function(){return Date.ORDINALNAMES[this.getDate()%10]},getHours12:function(){var n=this.getHours();return n>12?n-12:n==0?12:n},getAmPm:function(){return this.getHours()>=12?"PM":"AM"},getAmPmLower:function(){return this.getHours()>=12?"pm":"am"},getUnix:function(){return Math.round(this.getTime()/1e3,0)},getUTCOffset:function(){var n=this.getTimezoneOffset()/60,i=n<0?"+":"-";return n=Math.abs(n),i+e(Math.floor(n),2)+":"+e(n%1*60,2)},setUTCOffset:function(n){var i=this.getTimezoneOffset()*-1,o=this.getTime()+i*6e4;return this.setTime(o-n*6e4),this},setUTCOffsetString:function(n){var i=n.match(/([+-]?)([01]\d|2[0-3])\:?([0-5]\d)/);if(i){var o=parseFloat(i[2])*60;o+=parseFloat(i[3]),i[1]=="-"&&(o*=-1),this.setUTCOffset(o)}return this},getUTCOffsetNumber:function(){return this.getUTCOffset().replace(":","")},getTimezoneName:function(){var n=/(?:\((.+)\)$| ([A-Z]{3}) )/.exec(this.toString());return n[1]||n[2]||"GMT"+this.getUTCOffset()},toYmdInt:function(){return this.getFullYear()*1e4+this.getMonthNumber()*100+this.getDate()},clone:function(){return new Date(this.getTime())},diffText:function(n){var i=this.diff(n||Date.current(),"seconds"),o=Math.abs(i),c;if(o<120)return i>=0?"in a moment":"moments ago";if(o<3600)c=floor(o/60)+" minutes";else if(o<86400){var v=floor(o/3600),N=hour==1?"":"s";c=v+" hour"+N+" ago"}else{if(o<172800)return i>0?"tomorrow":"yesterday";if(o<604800)c=floor(o/86400)+" days";else{if(o<1209600)return i>0?"next week":"last week";if(o<2419200)c=floor(o/604800)+" weeks";else{if(o<5184e3)return i>0?"next month":"last month";if(o<31536e3)c=floor(o/2592e3)+" months";else{if(o<63072e3)return i>0?"next year":"last year";c=floor(o/31536e3)+" years"}}}}return i>0?"in "+c:c+" ago"},daysInMonth:function(){return Date.daysInMonth(this.getFullYear(),this.getMonth()+1)},isLeapYear:function(){return Date.daysInMonth(this.getFullYear(),1)==29?1:0},isBefore:function(n,i){return Math.round(this.diff(n,i||"milliseconds",!0),0)<0},isAfter:function(n,i){return Math.round(this.diff(n,i||"milliseconds",!0),0)>0},equals:function(n,i){return Math.round(this.diff(n,i||"milliseconds",!0),0)==0},schedule:function(n){var i=this.getTime()-Date.current().getTime(),o=this.clone();if(i<=0)return o.unschedule(n),n(),this;var c=this.getTime(),v=setTimeout(function(){o.unschedule(n),n()},i);return r.push({callback:n,timestamp:c,timeoutId:v}),this},unschedule:function(n){for(var i=r.length,o=this.getTime();i--;)r[i].callback==n&&r[i].timestamp==o&&(clearTimeout(r[i].timeoutId),r.splice(i,1));return this},getSchedule:function(){for(var n=[],i=this.getTime(),o=0,c=r.length;o<c;o++)r[o].timestamp==i&&n.push(r[o]);return n}};t(Date.prototype,u),Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.setUTCOffset(0).strftime(Date.ISO)});var f={create:function(n){if(typeof n>"u")return Date.current();if(n instanceof Date)return n;var i=arguments;switch(i.length){case 1:if(Object.prototype.toString.call(n)=="[object Number]")return new Date(n);if(n=String(n).replace(/^\s*(.*)\s*$/,"$1"),n=n.replace(/\s{2,}/g," "),n==="")return Date.current();for(var o=0,c,v,N,$,b,S;c=Date.create.patterns[o++];)if(typeof c[0]=="string"?(b=c[1],S=c[2]):(b=c[0],S=c[1]),!!($=n.match(b))){if(typeof S=="function"){if(N=S($,n),N instanceof Date)return N}else if(v=Date.parse(n.replace(b,S)),!isNaN(v))return new Date(v)}return NaN;case 2:return new Date(i[0],i[1],1);case 3:return new Date(i[0],i[1],i[2]);case 4:return new Date(i[0],i[1],i[2],i[3]);case 5:return new Date(i[0],i[1],i[2],i[3],i[4]);case 6:return new Date(i[0],i[1],i[2],i[3],i[4],i[5]);default:return new Date(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}},MONTHNAMES:"January February March April May June July August September October November December".split(" "),MONTHNAMES_LOOKUP:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},ABBR_MONTHNAMES:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAYNAMES:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),DAYNAMES_LOOKUP:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},ABBR_DAYNAMES:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ORDINALNAMES:"th st nd rd th th th th th th".split(" "),ISO:"%Y-%m-%dT%H:%M:%S.%N%G",SQL:"%Y-%m-%d %H:%M:%S",SCRIPT_LOAD:new Date,daysInMonth:function(n,i){return i==2?new Date(n,1,29).getDate()==29?29:28:[void 0,31,void 0,31,30,31,30,31,31,30,31,30,31][i]},getMonthByName:function(n){return Date.MONTHNAMES_LOOKUP[String(n).slice(0,3).toLowerCase()]},getWeekdayByName:function(n){return Date.DAYNAMES_LOOKUP[String(n).slice(0,3).toLowerCase()]},autoFormat:function(n,i){n=typeof n=="string"?document.getElementById(n):n;var o=function(){var c=Date.create(n.value);c&&(n.value=c.format(i))};return typeof n.attachEvent=="function"?n.attachEvent("onblur",o):typeof n.addEventListener=="function"?n.addEventListener("blur",o,!1):n.onblur=o,n},addFormat:function(n,i){return Date.prototype[n]=function(o){return this._applyFormat(o,i)},this},addPattern:function(n,i){if(i){for(var o=0,c;c=Date.create.patterns[o++];)if(c[0]==i||c[1]==i)return Date.create.patterns.splice(o,0,n),this}return Date.create.patterns.unshift(n),this},removePattern:function(n){for(var i=0,o;o=Date.create.patterns[i++];)if(o[0]==n||o[1]==n)return Date.create.patterns.splice(i-1,1)[0];return!1},current:function(){return new Date}};t(Date,f),"now"in Date||(Date.now=function(){return Date.current().setUTCOffset(0).getTime()});var h={};Date.Timer=function(n){return n===h?this:this.initialize.apply(this,Array.prototype.slice.call(arguments))},Date.Timer.prototype.initialize=function(){return this},typeof window<"u"?window.performance&&window.performance.now?Date.Timer._now=function(){return window.performance.now()}:window.performance&&window.performance.webkitNow&&(Date.Timer._now=function(){return window.performance.webkitNow()}):Date.Timer._now=function(){return new Date().getTime()*1e3},Date.Timer.prototype.start=Date.Timer.restart=function(){return this._startSnapshot=Date.Timer._now(),this.startDate=new Date,this},Date.Timer.prototype.clone=function(){var n=new Date.time(h);return n._startSnapshot=this._startSnapshot,n.startDate=this.startDate,n},Date.Timer.prototype.stop=function(n,i){if(i){var o=this.stop(n);return i.replace("%s",o).replace(/%?\.(\d+)f/i,function(v){return retult.toFixed(+v[1])})}this._stopSnapshot=Date.Timer._now(),this.stopDate=new Date;var c=this._stopSnapshot-this._startSnapshot;switch(String(n).toLowerCase()){case"microseconds":case"microsecond":return c;case"milliseconds":case"millisecond":default:return c/1e3;case"seconds":case"second":return c/1e6;case"minutes":case"minute":return c/6e7;case"hours":case"hour":return c/36e8;case"days":case"day":return c/(24*36e8)}},Date.addFormat("strftime",{matcher:/()%(#?(%|[a-z]))/i,defaultFormat:"%Y-%m-%d %H:%M:%s",codes:{Y:"FullYear",y:"ShortYear.2",m:"MonthNumber.2","#m":"MonthNumber",B:"MonthName",b:"AbbrMonthName",d:"Date.2","#d":"Date",e:"Date",A:"DayName",a:"AbbrDayName",w:"Day",o:"DayOrdinal",H:"Hours.2","#H":"Hours",I:"Hours12.2","#I":"Hours12",P:"AmPmLower",p:"AmPm",M:"Minutes.2","#M":"Minutes",S:"Seconds.2","#S":"Seconds",s:"Unix",N:"Milliseconds.3","#N":"Milliseconds",O:"TimezoneOffset",Z:"TimezoneName",G:"UTCOffset"},shortcuts:{F:"%Y-%m-%d",T:"%H:%M:%S",X:"%H:%M:%S",x:"%m/%d/%y",D:"%m/%d/%y","#c":"%a %b %e %H:%M:%S %Y",v:"%e-%b-%Y",R:"%H:%M",r:"%I:%M:%S %p",t:"	",n:`
`,"%":"%"}}),Date.addFormat("formatPhp",{matcher:/(\\)?([a-z])/i,defaultFormat:"Y-m-d H:i:s",codes:{Y:"FullYear",y:"ShortYear.2",L:"isLeapYear",m:"MonthNumber.2",n:"MonthNumber",F:"MonthName",M:"AbbrMonthName",t:"daysInMonth",d:"Date.2",j:"Date",l:"DayName",D:"AbbrDayName",w:"Day",S:"DayOrdinal",H:"Hours.2",G:"Hours",h:"Hours12.2",g:"Hours12",a:"AmPmLower",A:"AmPm",i:"Minutes.2",s:"Seconds.2",U:"Unix",Z:"TimezoneOffset",e:"TimezoneName",P:"UTCOffset",O:"UTCOffsetNumber"},shortcuts:{c:"Y-m-d\\TH:i:sP",r:"D, j M Y H:i:s O"}});for(var g={matcher:/()(mi|am|pm|ss|yyyy|yy|m{1,4}|d{1,4}|w|hh?24|hh?12)/i,defaultFormat:"yyyy-mm-dd hh24:mi:ss",codes:{yyyy:"FullYear",yy:"ShortYear.2",mm:"MonthNumber.2",m:"MonthNumber",mmm:"AbbrMonthName",mmmm:"MonthName",dd:"Date.2",d:"Date",ddd:"AbbrDayName",dddd:"DayName",w:"Day",hh24:"Hours.2",h24:"Hours",hh:"Hours12.2",hh12:"Hours12.2",h12:"Hours12",am:"AmPm",pm:"AmPm",mi:"Minutes.2",ss:"Seconds.2"},shortcuts:{}},_="yyyy yy mm m mmm mmmm dd d ddd dddd w hh24 h24 hh12 h12 am pm mi ss".split(" "),d=0,D;D=_[d++];)g.codes[D.toUpperCase()]=g.codes[D];Date.addFormat("formatSql",g),Date.create.regexes={YEAR:"[1-9]\\d{3}",MONTH:"1[0-2]|0?[1-9]",MONTH2:"1[0-2]|0[1-9]",MONTHNAME:"jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|september|oct|october|nov|november|dec|december",DAYNAME:"mon|monday|tue|tuesday|wed|wednesday|thu|thursday|fri|friday|sat|saturday|sun|sunday",DAY:"3[01]|[12]\\d|0?[1-9]",DAY2:"3[01]|[12]\\d|0[1-9]",TIMEZONE:"[+-][01]\\d\\:?[0-5]\\d",H24:"[01]\\d|2[0-3]",MIN:"[0-5]\\d",SEC:"[0-5]\\d",MS:"\\d{3,}",H12:"0?[1-9]|1[012]",AMPM:"am|pm",UNIT:"year|month|week|day|hour|minute|second|millisecond"},Date.create.makePattern=function(n){return n=n.replace(/_([A-Z][A-Z0-9]+)_/g,function(i,o){return Date.create.regexes[o]}),new RegExp(n,"i")},Date.create.patterns=[["iso_8601",Date.create.makePattern("^(_YEAR_)-(_MONTH_)-(_DAY_)$"),"$2/$3/$1"],["us",Date.create.makePattern("^(_MONTH_)([\\/-])(_DAY_)\\2(_YEAR_)$"),"$1/$3/$4"],["world",Date.create.makePattern("^(_DAY_)([\\/\\.])(_MONTH_)\\2(_YEAR_)$"),"$3/$1/$4"],["chicago",Date.create.makePattern("^(?:(?:_DAYNAME_),? )?(_DAY_)([ -])(_MONTHNAME_)\\2(_YEAR_)$"),"$3 $1, $4"],["conversational",Date.create.makePattern("^(?:(?:_DAYNAME_),? )?(_MONTHNAME_) (_DAY_),? (_YEAR_)$"),"$1 $2, $3"],["month_day_time_year",Date.create.makePattern("^(?:_DAYNAME_) (_MONTHNAME_) (_DAY_) ((?:_H24_)\\:(?:_MIN_)(?:\\:_SEC_)?) (_TIMEZONE_) (_YEAR_)$"),function(n){var i=e(Date.getMonthByName(n[1]),2),o=e(n[2],2),c=Date.create(n[5]+"-"+i+"-"+o+"T"+n[3]+n[4]);return isNaN(c)?!1:c}],["unix",/^@(-?\d+)$/,function(n){return Date.create(parseInt(n[1],10)*1e3)}],["24_hour",Date.create.makePattern("^(?:(.+?)(?: |T))?(_H24_)\\:(_MIN_)(?:\\:(_SEC_)(?:\\.(_MS_))?)? ?(?:GMT)?(_TIMEZONE_)?(?: \\([A-Z]+\\))?$"),function(n){var i;if(n[1]){if(i=Date.create(n[1]),isNaN(i))return!1}else i=Date.current(),i.setMilliseconds(0);return i.setHours(parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4]||0)),n[5]&&i.setMilliseconds(+String(n[5]).slice(0,3)),n[6]&&i.setUTCOffsetString(n[6]),i}],["12_hour",Date.create.makePattern("^(?:(.+) )?(_H12_)(?:\\:(_MIN_)(?:\\:(_SEC_))?)? ?(_AMPM_)$"),function(n){var i;if(n[1]){if(i=Date.create(n[1]),isNaN(i))return!1}else i=Date.current(),i.setMilliseconds(0);var o=parseFloat(n[2]);return o=n[5].toLowerCase()=="am"?o==12?0:o:o==12?12:o+12,i.setHours(o,parseFloat(n[3]||0),parseFloat(n[4]||0)),i}],["weeks_months_before_after",Date.create.makePattern("^(\\d+) (_UNIT_)s? (before|from|after) (.+)$"),function(n){var i=Date.create(n[4]);return i instanceof Date?i.add((n[3].toLowerCase()=="before"?-1:1)*n[1],n[2]):!1}],["time_ago",Date.create.makePattern("^(\\d+) (_UNIT_)s? ago$"),function(n){return Date.current().add(-1*n[1],n[2])}],["in_time",Date.create.makePattern("^in (\\d) (_UNIT_)s?$"),function(n){return Date.current().add(n[1],n[2])}],["plus_minus",Date.create.makePattern("^([+-]) ?(\\d+) (_UNIT_)s?$"),function(n){var i=n[1]=="-"?-1:1;return Date.current().add(i*n[2],n[3])}],["asp_json",/^\/Date\((\d+)([+-]\d{4})?\)\/$/i,function(n){var i=new Date;return i.setTime(n[1]),n[2]&&i.setUTCOffsetString(n[2]),i}],["today_tomorrow",/^(today|now|tomorrow|yesterday)/i,function(n){var i=Date.current();switch(n[1].toLowerCase()){case"today":case"now":return i;case"tomorrow":return i.add(1,"day");case"yesterday":return i.add(-1,"day")}}],["this_next_last",Date.create.makePattern("^(this|next|last) (?:(_UNIT_)s?|(_MONTHNAME_)|(_DAYNAME_))$"),function(n){var i=n[1].toLowerCase()=="last"?-1:1,o=Date.current(),c,v,N;return n[2]?o.add(i,n[2]):n[3]?(v=Date.getMonthByName(n[3])-1,c=12-(o.getMonth()-v),c=c>12?c-12:c,o.add(i*c,"month")):n[4]?(N=Date.getWeekdayByName(n[4]),c=o.getDay()-N+7,o.add(i*(c==0?7:c),"day")):!1}],["conversational_sans_year",Date.create.makePattern("^(_MONTHNAME_) (?:the )?(\\d+)(?:st|nd|rd|th)?$"),function(n){var i=Date.current();return n[1]&&i.setMonth(Date.getMonthByName(n[1])-1),i.setDate(n[2]),i}]],typeof module<"u"&&module.exports?module.exports=Date.create:typeof define=="function"&&define(function(){return Date.create}),typeof window<"u"&&(window.$D=Date.create)})();const Bs=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),js={};class k extends Date{constructor(...r){super(...r);T(this,"__currentMonth",!1)}static fromYYYY_MM(r){var a=r.replace(/_/g,"-")+"-01";return new Date(a)}static fromDate(r){return new k(r.getTime())}static fromAny(r){return this.fromDate(P(r))}diff(r,a="day"){let s=this.getTime()-r.getTime();switch(a){case"year":return s/1e3/60/60/24/365;case"month":return s/1e3/60/60/24/30;case"day":return s/1e3/60/60/24;case"hour":return s/1e3/60/60;case"minute":return s/1e3/60;case"second":return s/1e3;case"millisecond":return s}}add(r,a="day"){const s=this.clone();switch(a){case"year":s.setFullYear(this.getFullYear()+r);break;case"month":this.setMonth(this.getMonth()+r);case"day":this.setDate(this.getDate()+r);case"hour":s.setHours(this.getHours()+r);break;case"minute":s.setMinutes(this.getMinutes()+r);break;case"second":s.setSeconds(this.getSeconds()+r);break;case"millisecond":s.setMilliseconds(this.getMilliseconds()+r);break}return s}clone(){return new k(this.getTime())}setTimeByDate(r){return this.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getSeconds()),this}getDayMountInMonth(){let r=this.clone();return r.setMonth(r.getMonth()+1),r.setDate(0),r.getDate()}setToDayStart(){return this.clearTime()}setToDayEnd(){return this.setHours(23,59,59,999),this}setToMonthStart(){return this.setDate(1),this.setToDayStart()}setToMonthEnd(){return this.setDate(this.getDayMountInMonth()),this.setToDayEnd()}setToYearStart(){const r=this;return r.setMonth(0,1),r.setToDayStart(),r}setToYearEnd(){const r=this;return r.setMonth(12,1),r.setToDayStart(),r.setTime(r.getTime()-1),r}isSameDay(r){let a;typeof r=="number"?a=new k(r):a=k.prototype.clone.call(r);let s=a.clone().setToDayStart(),u=this.clone().setToDayStart();return s.getTime()==u.getTime()}clearTime(){return this.setHours(0,0,0,0),this}clearDay(){return this.setDate(1),this}formatToMonth(r="-"){const a=this.getFullYear(),s=this.getMonth()+1;return`${a}${r}${s}`}formatToDay(r="-"){const a=this.getFullYear(),s=this.getMonth()+1,u=this.getDate();return`${a}${r}${s}${r}${u}`}getCalendarDateList(r=!1){var a=this;typeof r>"u"&&(r=!0);var s=js,u=this.getFullYear()+"-"+(this.getMonth()+1)+"-"+(r?"0":"1");if(s[u])return s[u];let f,h;r?(f=0,h=6):(f=1,h=7);let g=[],_=this.clone().setToMonthStart(),d=this.clone().setToMonthEnd();var D=_.getDay(),n=d.getDay();let i=_.clone().add(f-D-1,"day"),o=d.clone().add(h-n+0,"day"),c=o.diff(i,"day"),v=0,N=a.getMonth();for(;v++<c;){let $=i.clone().add(v,"day");$.getMonth()==N&&($.__currentMonth=!0),g.push($)}return s[u]={list:g,firstDateInMonth:_,lastDateInMonth:d,firstDateInView:i,lastDateInView:o}}}const P=function(e){const t=new Date;if(e){if(e instanceof Date)return e;if(typeof e=="number"){const r=e+"",a=r.split(""),s=parseInt(a.splice(0,4).join("")),u=parseInt(a.splice(0,2).join(""))-1,f=parseInt(a.splice(0,2).join(""));return r.length==4?(t.setFullYear(s),t):r.length==6?(t.setFullYear(s),t.setMonth(u),t):r.length==8?(t.setFullYear(s),t.setMonth(u),t.setDate(f),t):new Date(e)}else if(typeof e=="string"){if(e=e.trim(),/^\d+$/.test(e))return P(parseInt(e));{const r=e.split(/[-:\sTZ\+年月日时分秒]/),[a=t.getFullYear(),s=t.getMonth()+1,u=t.getDate(),f=t.getHours(),h=t.getMinutes(),g=t.getSeconds()]=r,_=parseInt([a,(s+"").padStart(2,"0"),(u+"").padStart(2,"0")].join(""));if(r.length<=3)return P(_);{const d=P(_);if(!d)throw new Error("\u65E0\u6CD5\u89E3\u6790\u7684\u65E5\u671F\u683C\u5F0F");return d.setHours(f,h,g),d}}}}else return new Date},Be=P;function Gs(e){var t="";if(typeof e=="string"){let r=e.split("-");r.length==1?e=parseInt(e):r.length==2?t=e+"-01":t=e;const a=Bs(t);return ie(a)}else if(typeof e=="number"){const r=new Date;return r.setMonth(e-1),ie(r)}else throw new Error("\u8BF7\u4F20\u5165\u6709\u6548\u7C7B\u578B")}function ie(e){return e=new Date(Be(e).getTime()),e.add(1,"month"),e.setDate(0),e.getDate()}const Us=e=>e.replace(/[^\x00-\xff]/g,"**").length,Rs=(e,t)=>(r,a)=>r.trim().split(`
`).map(u=>{const f=u.trim();return f.startsWith("//")?"":f}).filter(u=>!!u).map(u=>{const[f,h,...g]=u.split(/\s+/),d={minWidth:Us(h)*7+45,key:f,title:h,visible:!1,sum:!1};g.forEach(n=>{if(["center","left"].includes(n))d.align=n;else if(/^(\+|\-)?(\d+)$/.test(n)){const i=RegExp.$1,o=parseInt(RegExp.$2);i==="+"?d.maxWidth=o:i==="-"?d.minWidth=o:d.width=o}else if(["show","hide"].includes(n))d.visible=n=="show";else if(n==="__sum__")d.sum=!0;else if(n.startsWith("#"))n=="#"?d.slot=d.key:d.slot=n.substring(1);else{const i=t[n];i?d.render=i:console.warn("\u672A\u5B9A\u4E49\u7684render:",n)}});const D=e[f];return D&&Object.assign(d,D),d.getValue=function(n){return d.render?d.render(null,{row:n,column:d},!0):n[d.key]},a?a(d,u):d});y.AError=L,y.BPromise=Oa,y.Date2=k,y.Math2=ae,y.all2date=P,y.all2valueName=Sa,y.byteArrayToString=Ya,y.encodeStringToGBK=La,y.firstLetterUppercase=ka,y.fromGBKArrayToString=Ha,y.getByteLength=Ba,y.getDayLengthInMonth=ie,y.getDayMountByMonth=Gs,y.getImageSize=Fa,y.isPlainObject=ne,y.makeTreeDataHelper=Aa,y.parse2date=Be,y.preppendZero=se,y.promiseMap=Fe,y.randomString=Oe,y.safeBindToObject=Ce,y.safeJsonParser=Ea,y.safeParseNumber=Ls,y.safeStringify=ja,y.safeValueInList=Ca,y.safeValueInRange=Ys,y.stripAndFixNumber=Hs,y.stripNumber=Le,y.stripString=Pa,y.travelTree=re,y.treeEach=$a,y.tryGet=Y,y.viewuiColumnFactory=Rs,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
