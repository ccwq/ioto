(function(y,M){typeof exports=="object"&&typeof module<"u"?M(exports):typeof define=="function"&&define.amd?define(["exports"],M):(y=typeof globalThis<"u"?globalThis:y||self,M(y.index={}))})(this,function(y){"use strict";var Ks=Object.defineProperty;var Zs=(y,M,A)=>M in y?Ks(y,M,{enumerable:!0,configurable:!0,writable:!0,value:A}):y[M]=A;var w=(y,M,A)=>(Zs(y,typeof M!="symbol"?M+"":M,A),A);function M(e,t){this.flags=e,this.cursor=t}M.prototype={skip:function(){this.flags.skip=!0},break:function(){this.flags.break=!0},remove:function(){this.flags.remove=!0},replace:function(t){this.flags.replace=t},get parent(){return this.cursor.parent},get depth(){return this.cursor.depth},get level(){return this.cursor.depth+1},get index(){return this.cursor.index}};function A(e,t){return new M(e,t)}function oe(e){this.xs=[e],this.top=0}oe.prototype={push:function(t){this.top++,this.top<this.xs.length?this.xs[this.top]=t:this.xs.push(t)},pushArrayReverse:function(t){for(var r=t.length-1;r>=0;r--)this.push(t[r])},pop:function(){var t=this.peek();return this.top--,t},peek:function(){return this.xs[this.top]},isEmpty:function(){return this.top===-1}};function L(e){return new oe(e)}function ue(){this.depth=0,this.stack=L({node:null,index:-1})}ue.prototype={moveDown:function(t){this.depth++,this.stack.push({node:t,index:0})},moveUp:function(){this.depth--,this.stack.pop()},moveNext:function(){this.stack.peek().index++},get parent(){return this.stack.peek().node},get index(){return this.stack.peek().index}};function ce(){return new ue}function fe(){this.break=!1,this.skip=!1,this.remove=!1,this.replace=null}fe.prototype={reset:function(){this.break=!1,this.skip=!1,this.remove=!1,this.replace=null}};function J(){return new fe}function W(e){return e&&e.length!==0}function Ge(e,t,r){for(var s=J(),i=ce(),c=A(s,i),f=L(e),m=Object.assign({},e);!f.isEmpty();){var p=f.pop();if(p===m){i.moveUp();continue}if(s.reset(),t(p,c),s.break)break;if(!s.remove&&(i.moveNext(),!s.skip)){s.replace&&(p=s.replace);var v=r(p);W(v)&&(f.push(m),f.pushArrayReverse(v),i.moveDown(p))}}}function Ue(e,t,r){for(var s=J(),i=ce(),c=A(s,i),f=L(e),m=L(null);!f.isEmpty();){var p=f.peek(),v=m.peek(),g=r(p);if(s.reset(),p===v||!W(g)){if(p===v&&(m.pop(),i.moveUp()),f.pop(),t(p,c),s.break)break;if(s.remove)continue;i.moveNext()}else m.push(p),i.moveDown(p),f.pushArrayReverse(g)}}var Re=32768;function le(e){this.xs=[e],this.top=0,this.maxLength=0}le.prototype={enqueue:function(t){this.xs.push(t)},enqueueMultiple:function(t){for(var r=0,s=t.length;r<s;r++)this.enqueue(t[r])},dequeue:function(){var t=this.peek();return this.top++,this.top===Re&&(this.xs=this.xs.slice(this.top),this.top=0),t},peek:function(){return this.xs[this.top]},isEmpty:function(){return this.top===this.xs.length}};function he(e){return new le(e)}function de(){this.depth=0,this.index=-1,this.queue=he({node:null,arity:1}),this.levelNodes=1,this.nextLevelNodes=0}de.prototype={store:function(t,r){this.queue.enqueue({node:t,arity:r}),this.nextLevelNodes+=r},moveNext:function(){this.index++},moveForward:function(){this.queue.peek().arity--,this.levelNodes--,this.queue.peek().arity===0&&(this.index=0,this.queue.dequeue()),this.levelNodes===0&&(this.depth++,this.levelNodes=this.nextLevelNodes,this.nextLevelNodes=0)},get parent(){return this.queue.peek().node}};function ze(){return new de}function qe(e,t,r){for(var s=J(),i=ze(),c=A(s,i),f=he(e);!f.isEmpty();){var m=f.dequeue();if(s.reset(),t(m,c),s.break)break;if(!s.remove&&(i.moveNext(),s.replace&&(m=s.replace),!s.skip)){var p=r(m);W(p)&&(f.enqueueMultiple(p),i.store(m,p.length))}i.moveForward()}}var Ke=function(t){return t.children};function Ze(e,t,r){if(e!=null){r=r||{};var s=r.order||"pre",i=r.getChildren||Ke;s==="pre"?Ge(e,t,i):s==="post"?Ue(e,t,i):s==="bfs"&&qe(e,t,i)}}var j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Je(e){for(var t=-1,r=e==null?0:e.length,s=0,i=[];++t<r;){var c=e[t];c&&(i[s++]=c)}return i}var We=Je,Xe=Array.isArray,X=Xe,Ve=typeof j=="object"&&j&&j.Object===Object&&j,Qe=Ve,et=Qe,tt=typeof self=="object"&&self&&self.Object===Object&&self,rt=et||tt||Function("return this")(),V=rt,nt=V,at=nt.Symbol,Q=at,pe=Q,me=Object.prototype,st=me.hasOwnProperty,it=me.toString,x=pe?pe.toStringTag:void 0;function ot(e){var t=st.call(e,x),r=e[x];try{e[x]=void 0;var s=!0}catch{}var i=it.call(e);return s&&(t?e[x]=r:delete e[x]),i}var ut=ot,ct=Object.prototype,ft=ct.toString;function lt(e){return ft.call(e)}var ht=lt,ye=Q,dt=ut,pt=ht,mt="[object Null]",yt="[object Undefined]",ge=ye?ye.toStringTag:void 0;function gt(e){return e==null?e===void 0?yt:mt:ge&&ge in Object(e)?dt(e):pt(e)}var ve=gt;function vt(e){return e!=null&&typeof e=="object"}var _t=vt,Dt=ve,Mt=_t,Nt="[object Symbol]";function bt(e){return typeof e=="symbol"||Mt(e)&&Dt(e)==Nt}var G=bt,Tt=X,wt=G,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/;function St(e,t){if(Tt(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||wt(e)?!0:$t.test(e)||!At.test(e)||t!=null&&e in Object(t)}var Et=St;function Ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var U=Ct,Ft=ve,It=U,Ot="[object AsyncFunction]",kt="[object Function]",Pt="[object GeneratorFunction]",Ht="[object Proxy]";function xt(e){if(!It(e))return!1;var t=Ft(e);return t==kt||t==Pt||t==Ot||t==Ht}var _e=xt,Yt=V,Bt=Yt["__core-js_shared__"],Lt=Bt,ee=Lt,De=function(){var e=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function jt(e){return!!De&&De in e}var Gt=jt,Ut=Function.prototype,Rt=Ut.toString;function zt(e){if(e!=null){try{return Rt.call(e)}catch{}try{return e+""}catch{}}return""}var qt=zt,Kt=_e,Zt=Gt,Jt=U,Wt=qt,Xt=/[\\^$.*+?()[\]{}|]/g,Vt=/^\[object .+?Constructor\]$/,Qt=Function.prototype,er=Object.prototype,tr=Qt.toString,rr=er.hasOwnProperty,nr=RegExp("^"+tr.call(rr).replace(Xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ar(e){if(!Jt(e)||Zt(e))return!1;var t=Kt(e)?nr:Vt;return t.test(Wt(e))}var sr=ar;function ir(e,t){return e==null?void 0:e[t]}var or=ir,ur=sr,cr=or;function fr(e,t){var r=cr(e,t);return ur(r)?r:void 0}var Me=fr,lr=Me,hr=lr(Object,"create"),R=hr,Ne=R;function dr(){this.__data__=Ne?Ne(null):{},this.size=0}var pr=dr;function mr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var yr=mr,gr=R,vr="__lodash_hash_undefined__",_r=Object.prototype,Dr=_r.hasOwnProperty;function Mr(e){var t=this.__data__;if(gr){var r=t[e];return r===vr?void 0:r}return Dr.call(t,e)?t[e]:void 0}var Nr=Mr,br=R,Tr=Object.prototype,wr=Tr.hasOwnProperty;function Ar(e){var t=this.__data__;return br?t[e]!==void 0:wr.call(t,e)}var $r=Ar,Sr=R,Er="__lodash_hash_undefined__";function Cr(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Sr&&t===void 0?Er:t,this}var Fr=Cr,Ir=pr,Or=yr,kr=Nr,Pr=$r,Hr=Fr;function F(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}F.prototype.clear=Ir,F.prototype.delete=Or,F.prototype.get=kr,F.prototype.has=Pr,F.prototype.set=Hr;var xr=F;function Yr(){this.__data__=[],this.size=0}var Br=Yr;function Lr(e,t){return e===t||e!==e&&t!==t}var be=Lr,jr=be;function Gr(e,t){for(var r=e.length;r--;)if(jr(e[r][0],t))return r;return-1}var z=Gr,Ur=z,Rr=Array.prototype,zr=Rr.splice;function qr(e){var t=this.__data__,r=Ur(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():zr.call(t,r,1),--this.size,!0}var Kr=qr,Zr=z;function Jr(e){var t=this.__data__,r=Zr(t,e);return r<0?void 0:t[r][1]}var Wr=Jr,Xr=z;function Vr(e){return Xr(this.__data__,e)>-1}var Qr=Vr,en=z;function tn(e,t){var r=this.__data__,s=en(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var rn=tn,nn=Br,an=Kr,sn=Wr,on=Qr,un=rn;function I(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}I.prototype.clear=nn,I.prototype.delete=an,I.prototype.get=sn,I.prototype.has=on,I.prototype.set=un;var cn=I,fn=Me,ln=V,hn=fn(ln,"Map"),dn=hn,Te=xr,pn=cn,mn=dn;function yn(){this.size=0,this.__data__={hash:new Te,map:new(mn||pn),string:new Te}}var gn=yn;function vn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _n=vn,Dn=_n;function Mn(e,t){var r=e.__data__;return Dn(t)?r[typeof t=="string"?"string":"hash"]:r.map}var q=Mn,Nn=q;function bn(e){var t=Nn(this,e).delete(e);return this.size-=t?1:0,t}var Tn=bn,wn=q;function An(e){return wn(this,e).get(e)}var $n=An,Sn=q;function En(e){return Sn(this,e).has(e)}var Cn=En,Fn=q;function In(e,t){var r=Fn(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var On=In,kn=gn,Pn=Tn,Hn=$n,xn=Cn,Yn=On;function O(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}O.prototype.clear=kn,O.prototype.delete=Pn,O.prototype.get=Hn,O.prototype.has=xn,O.prototype.set=Yn;var Bn=O,we=Bn,Ln="Expected a function";function te(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ln);var r=function(){var s=arguments,i=t?t.apply(this,s):s[0],c=r.cache;if(c.has(i))return c.get(i);var f=e.apply(this,s);return r.cache=c.set(i,f)||c,f};return r.cache=new(te.Cache||we),r}te.Cache=we;var jn=te,Gn=jn,Un=500;function Rn(e){var t=Gn(e,function(s){return r.size===Un&&r.clear(),s}),r=t.cache;return t}var zn=Rn,qn=zn,Kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/\\(\\)?/g,Jn=qn(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Kn,function(r,s,i,c){t.push(i?c.replace(Zn,"$1"):s||r)}),t}),Wn=Jn;function Xn(e,t){for(var r=-1,s=e==null?0:e.length,i=Array(s);++r<s;)i[r]=t(e[r],r,e);return i}var Vn=Xn,Ae=Q,Qn=Vn,ea=X,ta=G,ra=1/0,$e=Ae?Ae.prototype:void 0,Se=$e?$e.toString:void 0;function Ee(e){if(typeof e=="string")return e;if(ea(e))return Qn(e,Ee)+"";if(ta(e))return Se?Se.call(e):"";var t=e+"";return t=="0"&&1/e==-ra?"-0":t}var na=Ee,aa=na;function sa(e){return e==null?"":aa(e)}var ia=sa,oa=X,ua=Et,ca=Wn,fa=ia;function la(e,t){return oa(e)?e:ua(e,t)?[e]:ca(fa(e))}var ha=la,da=G,pa=1/0;function ma(e){if(typeof e=="string"||da(e))return e;var t=e+"";return t=="0"&&1/e==-pa?"-0":t}var ya=ma,ga=ha,va=ya;function _a(e,t){t=ga(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[va(t[r++])];return r&&r==s?e:void 0}var Da=_a,Ma=Da;function Na(e,t,r){var s=e==null?void 0:Ma(e,t);return s===void 0?r:s}var ba=Na;function Ta(e){return e==null}var wa=Ta;const Aa=function(e,t={}){let r={},s=[],i=[],c={};const f=function(){r={},s=[],i=[],c={}};f();let{childrenKey:m="children",checkedKey:p="checked",idKey:v="id"}=t,g=0,D=0;const n=function(l={}){m=l.childrenKey||m,p=l.checkedKey||p,v=l.idKey||v},a=function(l,h){l.forEach(function(d){const T=d[v];r[T]=d,d={...d},i.push(d),d.parent=h,d.index=g++;const H=h?h.deepth+1:0;d.deepth=H,D=Math.max(D,H),d.path=h?h.path+"."+d[v]:"0",d.parentIdList=h?[...h.parentIdList,h[v]]:[],c[T]=d,d[m]&&d[m].length>0&&a(d[m],d)})},o=function(l){return l[m]&&l[m].length>0?!l[m].map(d=>N(d[v])).find(d=>!d[p]):!1},u=function(l){f(),Array.isArray(l)&&a(l)};u(e);const _=function(l){var h;return(h=N(l))==null?void 0:h.parentIdList.map(d=>N(d))},b=function(l){const h=N(l);return i.filter(function(d){return d.parent===(h==null?void 0:h.parent)})},$=function(l){let h;if(!l)return console.warn("id\u4E0D\u80FD\u4E3A\u7A7A"),null;if(l instanceof Object)h=l[v];else if(typeof l=="string"||typeof l=="number")h=l;else return console.warn("id\u7C7B\u578B\u975E\u6CD5:",l),null;return h},N=function(l){const h=$(l);return h?c[h]:null},S=function(l){const h=$(l);return h?r[h]:null},Us=function(l){const h=N(l);return h==null?void 0:h.deepth},Rs=function(l,h){const d=N(l);d&&Object.assign(d,h)},zs=function(l,h,d=!1){const T=N(l);T&&(T[p]=h,d&&(T.parentIdList.forEach(H=>{const je=c[H];je[p]=o(je)}),Z(T,function(H){H[p]=h})))},qs=function(l){const h={};l&&l.forEach(d=>{h[d]=!0}),i.forEach(d=>{d[p]=h[d[v]]||!1})},Z=function(l,h){const d=N(l);if(d)h(d),d[m]&&d[m].length>0&&d[m].forEach(function(T){Z(T,h)});else throw new Error("\u8282\u70B9\u4E0D\u5B58\u5728:"+l)};return{travelNode:Z,getNodeList:(l=!0)=>l?[...i]:[...s],getNodeDescendantList:l=>{const h=[];return Z(l,function(d){h.push(d)}),h},getNodeListByFilter:l=>i.filter(l),getMinDeepth:function(){let l=D;for(const h in i){const d=i[h];if(d.checked&&(l=Math.min(l,d.deepth)),l===0)return 0}return l},getSublings:b,getParents:_,getDeepth:Us,getNode:N,updateIndexes:u,setChecked:zs,setProps:Rs,travelAllNode:function(l){for(const h in i){const d=i[h],T=S(d[v]);if(l(d,T)===!1)break}},setOptions:n,resetCheckStatus:qs,getOriginNode:S}},re=function(e,t,r="children",s="id",i=[],c={flag:!1}){if(e instanceof Array){re({[r]:e},t,r,s,i);return}const f=(e==null?void 0:e[r])||[];for(let m=0;m<f.length;m++){const p=f[m];if(!t(p,i,r,s)){c.flag=!0;break}if(p[r]instanceof Array&&re(p[r],t,r,s,[p,...i],c),c.flag)break}},Y=function(e,t,r=null,s=!1){if(typeof t=="string"&&(t=t.split(",")),!!Array.isArray(t)){for(let i=0;i<t.length;i++){const c=t[i],f=ba(e,c);if(s?wa(f):!!f)return f}return r}},ne=e=>Object.prototype.toString.call(e)=="[object Object]",Ce=function(e,t,r,s="_",i=0){e[t]?i<5&&Ce(e,s+t,r,s,i+1):e[t]=r},$a=function(e,t,r){let s=!1;return Array.isArray(e)&&(e={[t]:e},s=!0),Ze(e,r,{getChildren(i){return i[t]}}),s?e[t]:e},Sa=function(e,t=/\s+/,r=["0, \u8BF7\u63D0\u4F9Boptions"],s=null,i=",",c="name",f="value",m=!1){let p,v;typeof e=="function"&&(v=e()),typeof e=="string"?p=e.split(t).map(D=>D.trim()):Array.isArray(e)?p=e:Array.isArray(r)?p=r:typeof r=="function"?v=r():p=[{name:"\u8BF7\u901A\u8FC7optionLs\u4F20\u5165\u6570\u7EC4\u6216\u8005\u5F02\u6B65\u51FD\u6570",value:-1}];const g=function(D){typeof s=="function"&&(D=D.map(a=>{let[o,u]=s(a,{valueField:f,nameField:c},Y);return{value:o,name:u}}));let n=We(D);return n.length!=D.length&&console.warn("options\u4E2D\u5B58\u5728\u7A7A\u9009\u9879",D),D=n,D=D.map(a=>{if((typeof a=="string"||typeof a=="number")&&(a=(a+"").split(i).map(o=>o.trim())),Array.isArray(a)){let[o,u]=a;return u===void 0&&(u=o),{value:o,name:u}}else return a?{name:Y(a,c),value:Y(a,f)}:{name:"\u65E0\u6548options",value:"-"}}),D.forEach(a=>{typeof a.value!="number"&&typeof a.value!="string"&&(a.value=a.value+"")}),D};return p?g(p):v.then(D=>g(D))},Ea=function(e,t=null){if(ne(e))return e;if(typeof e!="string")return console.warn("safeJsonParser error",e),t;try{return JSON.parse(e)}catch{return console.log("json\u89E3\u6790\u5931\u8D25:",e),t}},Ca=function(e,t,r=0,s=void 0){if(t.includes(e))return e;{let i=t[r];return i===void 0&&(i=s),i}};function Fe(...e){let t;Array.isArray(arguments[0])?t=arguments[0]:t=Array.prototype.slice.call(arguments);let r=[];return t.reduce(function(s,i,c,f){return s.then(function(){if(typeof i=="function")try{i=i()}catch(m){return f.splice(1),Promise.reject(m)}else console.warn("map element:"+c+" not function");return i.then(m=>{r[c]=m})})},Promise.resolve(r)).then(function(){return r})}class Fa extends Promise{constructor(r=void 0){let s,i;super((c,f)=>{s=c,i=f,r&&r(c,f)});w(this,"__resolve");w(this,"__reject");this.__resolve=s,this.__reject=i}static map(r){return Fe(r)}static all(r){return Promise.all(r)}resolve(r){this.__resolve(r)}_resolve(r){this.__resolve(r)}reject(r){this.__reject(r)}_reject(r){this.__reject(r)}}const K=class{static get fastGbk(){if(!this._fastGbk)throw new Error("\u8BF7\u5148\u8C03\u7528setFaskGbk\u65B9\u6CD5\u8BBE\u7F6EfastGbk::$GBK.setFaskGbk(require('fast-gbk'))");return this._fastGbk}static setFaskGbk(t){this._fastGbk=t}static encode(t){return K.fastGbk.encode(t)}static decode(t){if(!t||!t.length)return"";typeof t=="string"&&(/^\%/.test(t)?t=t.split("%").splice(1):t=t.split(","));let r="";if(Array.isArray(t))if(typeof t[0]=="number")r=this.fastGbk.decode(t);else{const s=t.map(i=>{typeof i=="number"&&(console.warn("decodeGBK\u4F20\u5165\u7684\u6570\u7EC4\u4E2D\u6709number\u7C7B\u578B\u7684\u6570\u636E\uFF0C\u8FD9\u662F\u4E0D\u5141\u8BB8\u7684\uFF0C\u4F1A\u5BFC\u81F4\u89E3\u7801\u9519\u8BEF"),i=i+"");let c=parseInt(i,16);return isNaN(c)?0:c});r=K.decode(s)}return r}};let E=K;w(E,"_fastGbk");const Ie=new Map;function Ia(e){if(e===0)return"0";if(e===!1)return"False";if(!e)return"";if(typeof e!="string")throw new Error("\u65E0\u6548\u8F93\u5165");let[t,...r]=e;return t.toUpperCase()+r.join("")}function Oa(e,t){if(!e||!t)return"";var r=0,s=0,i="";for(s=0;s<e.length;s++){if(e.charCodeAt(s)>255?r+=2:r++,r>t)return i;i+=e.charAt(s)}return e}const Oe=()=>{let e=Math.random().toString(32).substr(2);return Ie.get(e)?Oe():(Ie.set(e,!0),e)};function ka(e){return E.decode(e)}function Pa(e){return E.decode(e)}function Ha(e,t="utf-8",r=16){return t.toLowerCase()=="gbk"&&r==16?ka(e):new TextDecoder(t).decode(new Uint8Array(e.map(s=>Number.isFinite(s)?s:parseInt(s,r))))}function xa(e,t="string"){return t=="string"?E.encode(e):E.encode(e).split("%").splice(1)}function Ya(e){for(var t=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s>=1&&s<=126||65376<=s&&s<=65439?t++:t+=2}return t}const Ba=(e,t="")=>ne(e)?JSON.stringify(e):typeof e=="string"?e:(console.warn("safeStringify error(\u6682\u4E0D\u652F\u6301\u7684\u6570\u636E\u7C7B\u578B)",e),t),La=/\:\:([-\d\.]+)$/,C=class{constructor(t,r,s=!1,i=null){w(this,"_name");w(this,"_code");w(this,"_silent");const c=this;c._name=t,c._code=r,c._silent=s}static addNameFieldList(t){this.nameFieldList.push(t)}get name(){return this._name}get message(){return this._name}get msg(){return this._name}get code(){return this._code}get cod(){return this._code}get errorCode(){return this._code}get silent(){return this._silent}get silence(){return this._silent}toString2(){const t=this;return`AError:${t.code}-${t.name}`}static fromErrorText(t,r=!1){const s=`${t}-${r?"0":"1"}`;let i=ke[s];if(!i){let c,f;La.test(t)?(c=RegExp.$1,f=t.replace(`::${c}`,"")):(c=0,f=t),i=new C(f,c,r),ke[s]=i}return i}static create(t,r=!1){return this.fromObject(t,r)}static getErrorCode(t){return t?t.constructor==C?t._code:this.fromObject(t)._code:0}};let B=C;w(B,"nameFieldList",["error","message","msg","errMsg","reason","errorText"]),w(B,"fromObject",(t,r=!1)=>{const s=C;if(!t)return new C("\u672A\u77E5\u9519\u8BEF",-9999);let i;if(t instanceof Error)return s.fromErrorText(t.message,r);if(typeof t=="string")if(/^(\[|\{)/.test(t))try{t=JSON.parse(t)}catch{i=t}else i=t;else i=Y(t,C.nameFieldList),r||(r=t.silence||t.silent);return!i&&t.data?s.fromObject(t.data):s.fromErrorText(i,r)});const ke={};function ja(e,t,r){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var c=Array(i);++s<i;)c[s]=e[s+t];return c}var Ga=ja,Ua=9007199254740991;function Ra(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ua}var za=Ra,qa=_e,Ka=za;function Za(e){return e!=null&&Ka(e.length)&&!qa(e)}var Ja=Za,Wa=9007199254740991,Xa=/^(?:0|[1-9]\d*)$/;function Va(e,t){var r=typeof e;return t=t==null?Wa:t,!!t&&(r=="number"||r!="symbol"&&Xa.test(e))&&e>-1&&e%1==0&&e<t}var Qa=Va,es=be,ts=Ja,rs=Qa,ns=U;function as(e,t,r){if(!ns(r))return!1;var s=typeof t;return(s=="number"?ts(r)&&rs(t,r.length):s=="string"&&t in r)?es(r[t],e):!1}var ss=as,is=/\s/;function os(e){for(var t=e.length;t--&&is.test(e.charAt(t)););return t}var us=os,cs=us,fs=/^\s+/;function ls(e){return e&&e.slice(0,cs(e)+1).replace(fs,"")}var hs=ls,ds=hs,Pe=U,ps=G,He=0/0,ms=/^[-+]0x[0-9a-f]+$/i,ys=/^0b[01]+$/i,gs=/^0o[0-7]+$/i,vs=parseInt;function _s(e){if(typeof e=="number")return e;if(ps(e))return He;if(Pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ds(e);var r=ys.test(e);return r||gs.test(e)?vs(e.slice(2),r?2:8):ms.test(e)?He:+e}var Ds=_s,Ms=Ds,xe=1/0,Ns=17976931348623157e292;function bs(e){if(!e)return e===0?e:0;if(e=Ms(e),e===xe||e===-xe){var t=e<0?-1:1;return t*Ns}return e===e?e:0}var Ts=bs,ws=Ts;function As(e){var t=ws(e),r=t%1;return t===t?r?t-r:t:0}var $s=As,Ss=Ga,Es=ss,Cs=$s,Fs=Math.ceil,Is=Math.max;function Os(e,t,r){(r?Es(e,t,r):t===void 0)?t=1:t=Is(Cs(t),0);var s=e==null?0:e.length;if(!s||t<1)return[];for(var i=0,c=0,f=Array(Fs(s/t));i<s;)f[c++]=Ss(e,i,i+=t);return f}var Ye=Os;class ae{static strip(t,r=12){return+parseFloat(t.toPrecision(r))}static hexString2DecLs(t){return Ye(t,2).map(r=>parseInt(r.join(""),16))}static preppendZero(t,r=2){return se(r,t)}static getDec(t){return t-Math.trunc(t)}static toDEC(t,r=16){return Array.isArray(t)?t.map(s=>parseInt(s,r)):parseInt(t,r)}static toHEX(t,r=2,s=10){if(Array.isArray(t))return t.map(i=>Array.isArray(i)?i[0]:this.toHEX(i,length,s));if(/[a-zA-Z]/.test(t+""))throw new Error("\u65E0\u6CD5\u8F6C\u6362\u4E3AHEX:"+t);return t=parseInt(t+"",s),t>=Math.pow(2,8)&&(r=4),ks(t,r)[0]}}function ks(e,t=2){let r=parseInt(e+"").toString(16).toUpperCase(),s=Ye(r,t).map(c=>c.join(""));const i=se(t,s[0]);return s.splice(0,1,i),s}function se(e,t){let r=e-(t+"").length;return r<=0?t+"":Array(r).fill("0").join("")+(t+"")}function Be(e,t=12){return typeof e!="number"&&(e=0),+parseFloat(e.toPrecision(t))}function Ps(e,t=2){typeof e!="number"&&(e=0);const r=Be(e).toFixed(t);return parseFloat(r)}const Hs=function(e,t=Number.MAX_SAFE_INTEGER,r=0){const s=typeof e=="string";let i=s?ae.toDEC(e):e;return typeof r=="number"&&(i=Math.max(r,i)),typeof t=="number"&&(i=Math.min(t,i)),s?ae.toHEX(i):i},xs=(e,t=0)=>{if(typeof e=="number")return e;const i=((e+"").includes(".")?parseFloat:parseInt)(e);return isNaN(i)?t:i};/**
 * JavaScript Date instance methods
 *
 * @copyright 2012 Ken Snyder (kendsnyder at gmail dot com)
 * @version 3.5.0, June 2012 (http://sandbox.kendsnyder.com/date)
 * @license MIT http://www.opensource.org/licenses/MIT
 */(function(){function e(n,a){switch(a-String(n).length){case 2:return"00"+n;case 1:return"0"+n}return n}function t(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}var r=[],s={millisecond:1,second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3,month:{add:function(n,a){var o=n.getDate();s.year.add(n,Math[a>0?"floor":"ceil"](a/12));var u=n.getMonth()+a%12;u==12?(u=0,n.setYear(n.getFullYear()+1)):u==-1&&(u=11,n.setYear(n.getFullYear()-1)),n.setMonth(u),n.getDate()!=o&&(n.add(-1,"month"),n.setDate(n.daysInMonth()))},diff:function(n,a){var o=n.getFullYear()-a.getFullYear(),u=n.getMonth()-a.getMonth()+o*12,_=n.getDate()-a.getDate();return u+_/30}},year:{add:function(n,a){n.setYear(n.getFullYear()+Math[a>0?"floor":"ceil"](a))},diff:function(n,a){return s.month.diff(n,a)/12}}},i=s;i.milliseconds=i.millisecond,i.seconds=i.second,i.minutes=i.minute,i.hours=i.hour,i.weeks=i.week,i.days=i.day,i.months=i.month,i.years=i.year;var c={succ:function(n){return this.clone().add(1,n||"day")},add:function(n,a){var o=s[a]||s.day;return typeof o=="number"?this.setTime(this.getTime()+o*n):o.add(this,n),this},diff:function(n,a,o){var u;if(n=Date.create(n),n===null)return NaN;var _=s[a]||s.day;return typeof _=="number"?u=(this.getTime()-n.getTime())/_:u=_.diff(this,n),o?u:Math[u>0?"floor":"ceil"](u)},_applyFormat:function(n,a){for(var o=n||a.defaultFormat,u="",_;o.length>0;)(_=o.match(a.matcher))?(u+=o.slice(0,_.index),u+=(_[1]||"")+this._applyFormatChar(_[2],a),o=o.slice(_.index+_[0].length)):(u+=o,o="");return u},_applyFormatChar:function(n,a){if(a.shortcuts&&a.shortcuts[n])return this._applyFormat(a.shortcuts[n],a);if(a.codes&&a.codes[n]){var o=a.codes[n].split("."),u=this["get"+o[0]]?this["get"+o[0]]():"";return o[1]&&(u=e(u,o[1])),u}return n},format:function(n){return n=n||Date.formatting.strftime.defaultFormat,n.indexOf("%")>-1?this.strftime(n):this.formatPhp(n)},getShortYear:function(){return this.getYear()%100},getMonthNumber:function(){return this.getMonth()+1},getMonthName:function(){return Date.MONTHNAMES[this.getMonth()]},getAbbrMonthName:function(){return Date.ABBR_MONTHNAMES[this.getMonth()]},getDayName:function(){return Date.DAYNAMES[this.getDay()]},getAbbrDayName:function(){return Date.ABBR_DAYNAMES[this.getDay()]},getDayOrdinal:function(){return Date.ORDINALNAMES[this.getDate()%10]},getHours12:function(){var n=this.getHours();return n>12?n-12:n==0?12:n},getAmPm:function(){return this.getHours()>=12?"PM":"AM"},getAmPmLower:function(){return this.getHours()>=12?"pm":"am"},getUnix:function(){return Math.round(this.getTime()/1e3,0)},getUTCOffset:function(){var n=this.getTimezoneOffset()/60,a=n<0?"+":"-";return n=Math.abs(n),a+e(Math.floor(n),2)+":"+e(n%1*60,2)},setUTCOffset:function(n){var a=this.getTimezoneOffset()*-1,o=this.getTime()+a*6e4;return this.setTime(o-n*6e4),this},setUTCOffsetString:function(n){var a=n.match(/([+-]?)([01]\d|2[0-3])\:?([0-5]\d)/);if(a){var o=parseFloat(a[2])*60;o+=parseFloat(a[3]),a[1]=="-"&&(o*=-1),this.setUTCOffset(o)}return this},getUTCOffsetNumber:function(){return this.getUTCOffset().replace(":","")},getTimezoneName:function(){var n=/(?:\((.+)\)$| ([A-Z]{3}) )/.exec(this.toString());return n[1]||n[2]||"GMT"+this.getUTCOffset()},toYmdInt:function(){return this.getFullYear()*1e4+this.getMonthNumber()*100+this.getDate()},clone:function(){return new Date(this.getTime())},diffText:function(n){var a=this.diff(n||Date.current(),"seconds"),o=Math.abs(a),u;if(o<120)return a>=0?"in a moment":"moments ago";if(o<3600)u=floor(o/60)+" minutes";else if(o<86400){var _=floor(o/3600),b=hour==1?"":"s";u=_+" hour"+b+" ago"}else{if(o<172800)return a>0?"tomorrow":"yesterday";if(o<604800)u=floor(o/86400)+" days";else{if(o<1209600)return a>0?"next week":"last week";if(o<2419200)u=floor(o/604800)+" weeks";else{if(o<5184e3)return a>0?"next month":"last month";if(o<31536e3)u=floor(o/2592e3)+" months";else{if(o<63072e3)return a>0?"next year":"last year";u=floor(o/31536e3)+" years"}}}}return a>0?"in "+u:u+" ago"},daysInMonth:function(){return Date.daysInMonth(this.getFullYear(),this.getMonth()+1)},isLeapYear:function(){return Date.daysInMonth(this.getFullYear(),1)==29?1:0},isBefore:function(n,a){return Math.round(this.diff(n,a||"milliseconds",!0),0)<0},isAfter:function(n,a){return Math.round(this.diff(n,a||"milliseconds",!0),0)>0},equals:function(n,a){return Math.round(this.diff(n,a||"milliseconds",!0),0)==0},schedule:function(n){var a=this.getTime()-Date.current().getTime(),o=this.clone();if(a<=0)return o.unschedule(n),n(),this;var u=this.getTime(),_=setTimeout(function(){o.unschedule(n),n()},a);return r.push({callback:n,timestamp:u,timeoutId:_}),this},unschedule:function(n){for(var a=r.length,o=this.getTime();a--;)r[a].callback==n&&r[a].timestamp==o&&(clearTimeout(r[a].timeoutId),r.splice(a,1));return this},getSchedule:function(){for(var n=[],a=this.getTime(),o=0,u=r.length;o<u;o++)r[o].timestamp==a&&n.push(r[o]);return n}};t(Date.prototype,c),Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.setUTCOffset(0).strftime(Date.ISO)});var f={create:function(n){if(typeof n>"u")return Date.current();if(n instanceof Date)return n;var a=arguments;switch(a.length){case 1:if(Object.prototype.toString.call(n)=="[object Number]")return new Date(n);if(n=String(n).replace(/^\s*(.*)\s*$/,"$1"),n=n.replace(/\s{2,}/g," "),n==="")return Date.current();for(var o=0,u,_,b,$,N,S;u=Date.create.patterns[o++];)if(typeof u[0]=="string"?(N=u[1],S=u[2]):(N=u[0],S=u[1]),!!($=n.match(N))){if(typeof S=="function"){if(b=S($,n),b instanceof Date)return b}else if(_=Date.parse(n.replace(N,S)),!isNaN(_))return new Date(_)}return NaN;case 2:return new Date(a[0],a[1],1);case 3:return new Date(a[0],a[1],a[2]);case 4:return new Date(a[0],a[1],a[2],a[3]);case 5:return new Date(a[0],a[1],a[2],a[3],a[4]);case 6:return new Date(a[0],a[1],a[2],a[3],a[4],a[5]);default:return new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}},MONTHNAMES:"January February March April May June July August September October November December".split(" "),MONTHNAMES_LOOKUP:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},ABBR_MONTHNAMES:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAYNAMES:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),DAYNAMES_LOOKUP:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},ABBR_DAYNAMES:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ORDINALNAMES:"th st nd rd th th th th th th".split(" "),ISO:"%Y-%m-%dT%H:%M:%S.%N%G",SQL:"%Y-%m-%d %H:%M:%S",SCRIPT_LOAD:new Date,daysInMonth:function(n,a){return a==2?new Date(n,1,29).getDate()==29?29:28:[void 0,31,void 0,31,30,31,30,31,31,30,31,30,31][a]},getMonthByName:function(n){return Date.MONTHNAMES_LOOKUP[String(n).slice(0,3).toLowerCase()]},getWeekdayByName:function(n){return Date.DAYNAMES_LOOKUP[String(n).slice(0,3).toLowerCase()]},autoFormat:function(n,a){n=typeof n=="string"?document.getElementById(n):n;var o=function(){var u=Date.create(n.value);u&&(n.value=u.format(a))};return typeof n.attachEvent=="function"?n.attachEvent("onblur",o):typeof n.addEventListener=="function"?n.addEventListener("blur",o,!1):n.onblur=o,n},addFormat:function(n,a){return Date.prototype[n]=function(o){return this._applyFormat(o,a)},this},addPattern:function(n,a){if(a){for(var o=0,u;u=Date.create.patterns[o++];)if(u[0]==a||u[1]==a)return Date.create.patterns.splice(o,0,n),this}return Date.create.patterns.unshift(n),this},removePattern:function(n){for(var a=0,o;o=Date.create.patterns[a++];)if(o[0]==n||o[1]==n)return Date.create.patterns.splice(a-1,1)[0];return!1},current:function(){return new Date}};t(Date,f),"now"in Date||(Date.now=function(){return Date.current().setUTCOffset(0).getTime()});var m={};Date.Timer=function(n){return n===m?this:this.initialize.apply(this,Array.prototype.slice.call(arguments))},Date.Timer.prototype.initialize=function(){return this},typeof window<"u"?window.performance&&window.performance.now?Date.Timer._now=function(){return window.performance.now()}:window.performance&&window.performance.webkitNow&&(Date.Timer._now=function(){return window.performance.webkitNow()}):Date.Timer._now=function(){return new Date().getTime()*1e3},Date.Timer.prototype.start=Date.Timer.restart=function(){return this._startSnapshot=Date.Timer._now(),this.startDate=new Date,this},Date.Timer.prototype.clone=function(){var n=new Date.time(m);return n._startSnapshot=this._startSnapshot,n.startDate=this.startDate,n},Date.Timer.prototype.stop=function(n,a){if(a){var o=this.stop(n);return a.replace("%s",o).replace(/%?\.(\d+)f/i,function(_){return retult.toFixed(+_[1])})}this._stopSnapshot=Date.Timer._now(),this.stopDate=new Date;var u=this._stopSnapshot-this._startSnapshot;switch(String(n).toLowerCase()){case"microseconds":case"microsecond":return u;case"milliseconds":case"millisecond":default:return u/1e3;case"seconds":case"second":return u/1e6;case"minutes":case"minute":return u/6e7;case"hours":case"hour":return u/36e8;case"days":case"day":return u/(24*36e8)}},Date.addFormat("strftime",{matcher:/()%(#?(%|[a-z]))/i,defaultFormat:"%Y-%m-%d %H:%M:%s",codes:{Y:"FullYear",y:"ShortYear.2",m:"MonthNumber.2","#m":"MonthNumber",B:"MonthName",b:"AbbrMonthName",d:"Date.2","#d":"Date",e:"Date",A:"DayName",a:"AbbrDayName",w:"Day",o:"DayOrdinal",H:"Hours.2","#H":"Hours",I:"Hours12.2","#I":"Hours12",P:"AmPmLower",p:"AmPm",M:"Minutes.2","#M":"Minutes",S:"Seconds.2","#S":"Seconds",s:"Unix",N:"Milliseconds.3","#N":"Milliseconds",O:"TimezoneOffset",Z:"TimezoneName",G:"UTCOffset"},shortcuts:{F:"%Y-%m-%d",T:"%H:%M:%S",X:"%H:%M:%S",x:"%m/%d/%y",D:"%m/%d/%y","#c":"%a %b %e %H:%M:%S %Y",v:"%e-%b-%Y",R:"%H:%M",r:"%I:%M:%S %p",t:"	",n:`
`,"%":"%"}}),Date.addFormat("formatPhp",{matcher:/(\\)?([a-z])/i,defaultFormat:"Y-m-d H:i:s",codes:{Y:"FullYear",y:"ShortYear.2",L:"isLeapYear",m:"MonthNumber.2",n:"MonthNumber",F:"MonthName",M:"AbbrMonthName",t:"daysInMonth",d:"Date.2",j:"Date",l:"DayName",D:"AbbrDayName",w:"Day",S:"DayOrdinal",H:"Hours.2",G:"Hours",h:"Hours12.2",g:"Hours12",a:"AmPmLower",A:"AmPm",i:"Minutes.2",s:"Seconds.2",U:"Unix",Z:"TimezoneOffset",e:"TimezoneName",P:"UTCOffset",O:"UTCOffsetNumber"},shortcuts:{c:"Y-m-d\\TH:i:sP",r:"D, j M Y H:i:s O"}});for(var p={matcher:/()(mi|am|pm|ss|yyyy|yy|m{1,4}|d{1,4}|w|hh?24|hh?12)/i,defaultFormat:"yyyy-mm-dd hh24:mi:ss",codes:{yyyy:"FullYear",yy:"ShortYear.2",mm:"MonthNumber.2",m:"MonthNumber",mmm:"AbbrMonthName",mmmm:"MonthName",dd:"Date.2",d:"Date",ddd:"AbbrDayName",dddd:"DayName",w:"Day",hh24:"Hours.2",h24:"Hours",hh:"Hours12.2",hh12:"Hours12.2",h12:"Hours12",am:"AmPm",pm:"AmPm",mi:"Minutes.2",ss:"Seconds.2"},shortcuts:{}},v="yyyy yy mm m mmm mmmm dd d ddd dddd w hh24 h24 hh12 h12 am pm mi ss".split(" "),g=0,D;D=v[g++];)p.codes[D.toUpperCase()]=p.codes[D];Date.addFormat("formatSql",p),Date.create.regexes={YEAR:"[1-9]\\d{3}",MONTH:"1[0-2]|0?[1-9]",MONTH2:"1[0-2]|0[1-9]",MONTHNAME:"jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|september|oct|october|nov|november|dec|december",DAYNAME:"mon|monday|tue|tuesday|wed|wednesday|thu|thursday|fri|friday|sat|saturday|sun|sunday",DAY:"3[01]|[12]\\d|0?[1-9]",DAY2:"3[01]|[12]\\d|0[1-9]",TIMEZONE:"[+-][01]\\d\\:?[0-5]\\d",H24:"[01]\\d|2[0-3]",MIN:"[0-5]\\d",SEC:"[0-5]\\d",MS:"\\d{3,}",H12:"0?[1-9]|1[012]",AMPM:"am|pm",UNIT:"year|month|week|day|hour|minute|second|millisecond"},Date.create.makePattern=function(n){return n=n.replace(/_([A-Z][A-Z0-9]+)_/g,function(a,o){return Date.create.regexes[o]}),new RegExp(n,"i")},Date.create.patterns=[["iso_8601",Date.create.makePattern("^(_YEAR_)-(_MONTH_)-(_DAY_)$"),"$2/$3/$1"],["us",Date.create.makePattern("^(_MONTH_)([\\/-])(_DAY_)\\2(_YEAR_)$"),"$1/$3/$4"],["world",Date.create.makePattern("^(_DAY_)([\\/\\.])(_MONTH_)\\2(_YEAR_)$"),"$3/$1/$4"],["chicago",Date.create.makePattern("^(?:(?:_DAYNAME_),? )?(_DAY_)([ -])(_MONTHNAME_)\\2(_YEAR_)$"),"$3 $1, $4"],["conversational",Date.create.makePattern("^(?:(?:_DAYNAME_),? )?(_MONTHNAME_) (_DAY_),? (_YEAR_)$"),"$1 $2, $3"],["month_day_time_year",Date.create.makePattern("^(?:_DAYNAME_) (_MONTHNAME_) (_DAY_) ((?:_H24_)\\:(?:_MIN_)(?:\\:_SEC_)?) (_TIMEZONE_) (_YEAR_)$"),function(n){var a=e(Date.getMonthByName(n[1]),2),o=e(n[2],2),u=Date.create(n[5]+"-"+a+"-"+o+"T"+n[3]+n[4]);return isNaN(u)?!1:u}],["unix",/^@(-?\d+)$/,function(n){return Date.create(parseInt(n[1],10)*1e3)}],["24_hour",Date.create.makePattern("^(?:(.+?)(?: |T))?(_H24_)\\:(_MIN_)(?:\\:(_SEC_)(?:\\.(_MS_))?)? ?(?:GMT)?(_TIMEZONE_)?(?: \\([A-Z]+\\))?$"),function(n){var a;if(n[1]){if(a=Date.create(n[1]),isNaN(a))return!1}else a=Date.current(),a.setMilliseconds(0);return a.setHours(parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4]||0)),n[5]&&a.setMilliseconds(+String(n[5]).slice(0,3)),n[6]&&a.setUTCOffsetString(n[6]),a}],["12_hour",Date.create.makePattern("^(?:(.+) )?(_H12_)(?:\\:(_MIN_)(?:\\:(_SEC_))?)? ?(_AMPM_)$"),function(n){var a;if(n[1]){if(a=Date.create(n[1]),isNaN(a))return!1}else a=Date.current(),a.setMilliseconds(0);var o=parseFloat(n[2]);return o=n[5].toLowerCase()=="am"?o==12?0:o:o==12?12:o+12,a.setHours(o,parseFloat(n[3]||0),parseFloat(n[4]||0)),a}],["weeks_months_before_after",Date.create.makePattern("^(\\d+) (_UNIT_)s? (before|from|after) (.+)$"),function(n){var a=Date.create(n[4]);return a instanceof Date?a.add((n[3].toLowerCase()=="before"?-1:1)*n[1],n[2]):!1}],["time_ago",Date.create.makePattern("^(\\d+) (_UNIT_)s? ago$"),function(n){return Date.current().add(-1*n[1],n[2])}],["in_time",Date.create.makePattern("^in (\\d) (_UNIT_)s?$"),function(n){return Date.current().add(n[1],n[2])}],["plus_minus",Date.create.makePattern("^([+-]) ?(\\d+) (_UNIT_)s?$"),function(n){var a=n[1]=="-"?-1:1;return Date.current().add(a*n[2],n[3])}],["asp_json",/^\/Date\((\d+)([+-]\d{4})?\)\/$/i,function(n){var a=new Date;return a.setTime(n[1]),n[2]&&a.setUTCOffsetString(n[2]),a}],["today_tomorrow",/^(today|now|tomorrow|yesterday)/i,function(n){var a=Date.current();switch(n[1].toLowerCase()){case"today":case"now":return a;case"tomorrow":return a.add(1,"day");case"yesterday":return a.add(-1,"day")}}],["this_next_last",Date.create.makePattern("^(this|next|last) (?:(_UNIT_)s?|(_MONTHNAME_)|(_DAYNAME_))$"),function(n){var a=n[1].toLowerCase()=="last"?-1:1,o=Date.current(),u,_,b;return n[2]?o.add(a,n[2]):n[3]?(_=Date.getMonthByName(n[3])-1,u=12-(o.getMonth()-_),u=u>12?u-12:u,o.add(a*u,"month")):n[4]?(b=Date.getWeekdayByName(n[4]),u=o.getDay()-b+7,o.add(a*(u==0?7:u),"day")):!1}],["conversational_sans_year",Date.create.makePattern("^(_MONTHNAME_) (?:the )?(\\d+)(?:st|nd|rd|th)?$"),function(n){var a=Date.current();return n[1]&&a.setMonth(Date.getMonthByName(n[1])-1),a.setDate(n[2]),a}]],typeof module<"u"&&module.exports?module.exports=Date.create:typeof define=="function"&&define(function(){return Date.create}),typeof window<"u"&&(window.$D=Date.create)})();const Ys=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Bs={};class k extends Date{constructor(...r){super(...r);w(this,"__currentMonth",!1)}static fromYYYY_MM(r){var s=r.replace(/_/g,"-")+"-01";return new Date(s)}static fromDate(r){return new k(r.getTime())}static fromAny(r){return this.fromDate(P(r))}diff(r,s="day"){let i=this.getTime()-r.getTime();switch(s){case"year":return i/1e3/60/60/24/365;case"month":return i/1e3/60/60/24/30;case"day":return i/1e3/60/60/24;case"hour":return i/1e3/60/60;case"minute":return i/1e3/60;case"second":return i/1e3;case"millisecond":return i}}add(r,s="day"){const i=this.clone();switch(s){case"year":i.setFullYear(this.getFullYear()+r);break;case"month":this.setMonth(this.getMonth()+r);case"day":this.setDate(this.getDate()+r);case"hour":i.setHours(this.getHours()+r);break;case"minute":i.setMinutes(this.getMinutes()+r);break;case"second":i.setSeconds(this.getSeconds()+r);break;case"millisecond":i.setMilliseconds(this.getMilliseconds()+r);break}return i}clone(){return new k(this.getTime())}setTimeByDate(r){return this.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getSeconds()),this}getDayMountInMonth(){let r=this.clone();return r.setMonth(r.getMonth()+1),r.setDate(0),r.getDate()}setToDayStart(){return this.clearTime()}setToDayEnd(){return this.setHours(23,59,59,999),this}setToMonthStart(){return this.setDate(1),this.setToDayStart()}setToMonthEnd(){return this.setDate(this.getDayMountInMonth()),this.setToDayEnd()}setToYearStart(){const r=this;return r.setMonth(0,1),r.setToDayStart(),r}setToYearEnd(){const r=this;return r.setMonth(12,1),r.setToDayStart(),r.setTime(r.getTime()-1),r}isSameDay(r){let s;typeof r=="number"?s=new k(r):s=k.prototype.clone.call(r);let i=s.clone().setToDayStart(),c=this.clone().setToDayStart();return i.getTime()==c.getTime()}clearTime(){return this.setHours(0,0,0,0),this}clearDay(){return this.setDate(1),this}formatToMonth(r="-"){const s=this.getFullYear(),i=this.getMonth()+1;return`${s}${r}${i}`}formatToDay(r="-"){const s=this.getFullYear(),i=this.getMonth()+1,c=this.getDate();return`${s}${r}${i}${r}${c}`}getCalendarDateList(r=!1){var s=this;typeof r>"u"&&(r=!0);var i=Bs,c=this.getFullYear()+"-"+(this.getMonth()+1)+"-"+(r?"0":"1");if(i[c])return i[c];let f,m;r?(f=0,m=6):(f=1,m=7);let p=[],v=this.clone().setToMonthStart(),g=this.clone().setToMonthEnd();var D=v.getDay(),n=g.getDay();let a=v.clone().add(f-D-1,"day"),o=g.clone().add(m-n+0,"day"),u=o.diff(a,"day"),_=0,b=s.getMonth();for(;_++<u;){let $=a.clone().add(_,"day");$.getMonth()==b&&($.__currentMonth=!0),p.push($)}return i[c]={list:p,firstDateInMonth:v,lastDateInMonth:g,firstDateInView:a,lastDateInView:o}}}const P=function(e){const t=new Date;if(e){if(e instanceof Date)return e;if(typeof e=="number"){const r=e+"",s=r.split(""),i=parseInt(s.splice(0,4).join("")),c=parseInt(s.splice(0,2).join(""))-1,f=parseInt(s.splice(0,2).join(""));return r.length==4?(t.setFullYear(i),t):r.length==6?(t.setFullYear(i),t.setMonth(c),t):r.length==8?(t.setFullYear(i),t.setMonth(c),t.setDate(f),t):new Date(e)}else if(typeof e=="string"){if(e=e.trim(),/^\d+$/.test(e))return P(parseInt(e));{const r=e.split(/[-:\sTZ\+年月日时分秒]/),[s=t.getFullYear(),i=t.getMonth()+1,c=t.getDate(),f=t.getHours(),m=t.getMinutes(),p=t.getSeconds()]=r,v=parseInt([s,(i+"").padStart(2,"0"),(c+"").padStart(2,"0")].join(""));if(r.length<=3)return P(v);{const g=P(v);if(!g)throw new Error("\u65E0\u6CD5\u89E3\u6790\u7684\u65E5\u671F\u683C\u5F0F");return g.setHours(f,m,p),g}}}}else return new Date},Le=P;function Ls(e){var t="";if(typeof e=="string"){let r=e.split("-");r.length==1?e=parseInt(e):r.length==2?t=e+"-01":t=e;const s=Ys(t);return ie(s)}else if(typeof e=="number"){const r=new Date;return r.setMonth(e-1),ie(r)}else throw new Error("\u8BF7\u4F20\u5165\u6709\u6548\u7C7B\u578B")}function ie(e){return e=new Date(Le(e).getTime()),e.add(1,"month"),e.setDate(0),e.getDate()}const js=e=>e.replace(/[^\x00-\xff]/g,"**").length,Gs=(e,t)=>(r,s)=>r.trim().split(`
`).map(c=>{const f=c.trim();return f.startsWith("//")?"":f}).filter(c=>!!c).map(c=>{const[f,m,...p]=c.split(/\s+/),g={minWidth:js(m)*7+45,key:f,title:m,visible:!1,sum:!1};p.forEach(n=>{if(["center","left"].includes(n))g.align=n;else if(/^(\+|\-)?(\d+)$/.test(n)){const a=RegExp.$1,o=parseInt(RegExp.$2);a==="+"?g.maxWidth=o:a==="-"?g.minWidth=o:g.width=o}else if(["show","hide"].includes(n))g.visible=n=="show";else if(n==="__sum__")g.sum=!0;else if(n.startsWith("#"))n=="#"?g.slot=g.key:g.slot=n.substring(1);else{const a=t[n];a?g.render=a:console.warn("\u672A\u5B9A\u4E49\u7684render:",n)}});const D=e[f];return D&&Object.assign(g,D),g.getValue=function(n){return g.render?g.render(null,{row:n,column:g},!0):n[g.key]},s?s(g,c):g});y.AError=B,y.BPromise=Fa,y.Date2=k,y.Math2=ae,y.all2date=P,y.all2valueName=Sa,y.byteArrayToString=Ha,y.encodeStringToGBK=xa,y.firstLetterUppercase=Ia,y.fromGBKArrayToString=Pa,y.getByteLength=Ya,y.getDayLengthInMonth=ie,y.getDayMountByMonth=Ls,y.isPlainObject=ne,y.makeTreeDataHelper=Aa,y.parse2date=Le,y.preppendZero=se,y.promiseMap=Fe,y.randomString=Oe,y.safeBindToObject=Ce,y.safeJsonParser=Ea,y.safeParseNumber=xs,y.safeStringify=Ba,y.safeValueInList=Ca,y.safeValueInRange=Hs,y.stripAndFixNumber=Ps,y.stripNumber=Be,y.stripString=Oa,y.travelTree=re,y.treeEach=$a,y.tryGet=Y,y.viewuiColumnFactory=Gs,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
